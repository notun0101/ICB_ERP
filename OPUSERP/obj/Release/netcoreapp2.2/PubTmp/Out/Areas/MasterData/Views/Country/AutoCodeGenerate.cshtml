@model AutoCodeGenerateViewModel
@{
    ViewData["Title"] = "Country";
    Layout = "/Views/Shared/_Layout.cshtml";
}

@section Style{
}

<div class="card" style="width: 100%;">
    <div class="card-body">
        <h5 class="card-title" style="color: #4e73df!important;">Auto Number Generate Info</h5>
        <hr>
        <div class="container">
            <form asp-area="MasterData" asp-controller="Country" asp-action="AutoCodeGenerate" method="post" data-parsley-validate="parsley">

                <div asp-validation-summary="All" class="text-danger"></div>

                <div class="form-group row">
                    <input type="hidden" name="Id" id="Id" value="0" />

                    <label for="fieldName" class="col-sm-4 col-form-label">Field Name</label>
                    <div class="col-sm-8">
                        <input type="text" data-parsley-required="true" data-parsley-trigger="keyup" class="form-control" name="fieldName" id="fieldName">
                    </div>
                </div>

                <div class="form-group row">
                    <label for="NumType" class="col-sm-4 col-form-label">Number Type</label>
                    <div class="col-sm-8">
                        <select data-parsley-required="true" data-parsley-trigger="keyup" class="form-control" name="NumType" id="NumType">
                            <option value="">Select One</option>
                            <option value="1">Default</option>
                            <option value="2">Customize</option>
                            <option value="3">Free</option>
                        </select>
                    </div>
                </div>

                <div class="form-group row" id="default">
                    <label for="defaultValue" class="col-sm-4 col-form-label">Default Value</label>
                    <div class="col-sm-8">
                        <input type="number" class="form-control" name="defaultValue" id="defaultValue">
                    </div>
                </div>

                <div class="form-group row" id="divprefix" style="display:none">
                    <label for="prefix" class="col-sm-4 col-form-label">Prefix</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" name="prefix" id="prefix">
                    </div>
                    <label for="prefix" class="col-sm-2 col-form-label">Separator</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" name="separator" id="separator">
                    </div>
                </div>
                @*<div class="form-group row" id="presep">
                    <label for="prefix" class="col-sm-4 col-form-label">Separator</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" name="separator" id="separator">
                    </div>
                </div>*@ 
                <div class="form-group row" id="year" style="display:none">
                    <label for="prefix" class="col-sm-4 col-form-label">Add Year</label>
                    <div class="col-sm-4">
                        <input type="checkbox" class="form-control" name="isyear" id="isyear">
                        @*<label for="prefix" class="col-sm-3 col-form-label">Is Year</label>
            <input type="checkbox" class="col-sm-1 form-control" name="ismonth" id="ismonth">
            <label for="prefix" class="col-sm-3 col-form-label">Is Month</label>
            <input type="checkbox" class="col-sm-1 form-control" name="isdate" id="isdate">
            <label for="prefix" class="col-sm-3 col-form-label">Is Date</label>*@
                    </div>
                    <label for="prefix" class="col-sm-2 col-form-label">Separator</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" name="yseparator" id="yseparator">
                    </div>



                </div>
                <div class="form-group row" id="month" style="display:none">
                    <label for="prefix" class="col-sm-4 col-form-label">Add Month</label>
                    <div class="col-sm-4">
                        <input type="checkbox" class="form-control" name="ismonth" id="ismonth">
                        @*<label for="prefix" class="col-sm-3 col-form-label">Is Year</label>
            <input type="checkbox" class="col-sm-1 form-control" name="ismonth" id="ismonth">
            <label for="prefix" class="col-sm-3 col-form-label">Is Month</label>
            <input type="checkbox" class="col-sm-1 form-control" name="isdate" id="isdate">
            <label for="prefix" class="col-sm-3 col-form-label">Is Date</label>*@
                    </div>
                    <label for="prefix" class="col-sm-2 col-form-label">Separator</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" name="mseparator" id="mseparator">
                    </div>



                </div> 
                <div class="form-group row" id="date" style="display:none">
                    <label for="prefix" class="col-sm-4 col-form-label">Add Date</label>
                    <div class="col-sm-4">
                        <input type="checkbox" class="form-control" name="isdate" id="isdate">
                        @*<label for="prefix" class="col-sm-3 col-form-label">Is Year</label>
            <input type="checkbox" class="col-sm-1 form-control" name="ismonth" id="ismonth">
            <label for="prefix" class="col-sm-3 col-form-label">Is Month</label>
            <input type="checkbox" class="col-sm-1 form-control" name="isdate" id="isdate">
            <label for="prefix" class="col-sm-3 col-form-label">Is Date</label>*@
                    </div>
                    <label for="prefix" class="col-sm-2 col-form-label">Separator</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" name="dseparator" id="dseparator">
                    </div>



                </div>

                <div class="form-group row" id="start" style="display:none">
                    <label for="startValue" class="col-sm-4 col-form-label">Start Value</label>
                    <div class="col-sm-8">
                        <input type="number" class="form-control" name="startValue" id="startValue">
                    </div>
                </div>

                <div class="form-group row" id="divNumValue">
                    <label for="NumValue" class="col-sm-4 col-form-label">Length of Serial Number</label>
                    <div class="col-sm-8">
                        <input type="number" required class="form-control" name="NumValue" id="NumValue">
                    </div>
                </div>


                <hr />
                <button type="submit" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;"><i class="fas fa-save"></i></button>
            </form>
        </div>
    </div>
</div>

<br />
<hr />
<div class="row clearfix">
    <div class="col-12">
        <div class="card mb-4">
            <!-- Card Header - Dropdown -->
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">Auto Number Generate List</h6>
            </div>
            <!-- Card Body -->
            <div class="card-body">
                <table class="table table-striped table-bordered" id="countryTable">
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th>Number Type</th>
                            <th>Default Value</th>
                            <th>Prefix</th>
                           
                            <th>Start Value</th>
                            <th>Number Value</th>
                            <th>Action</th>
                    </thead>
                    <tbody>
                        @foreach (var data in Model.autonumberingInfos)
                        {
                            <tr>
                                <td>@data.fieldName</td>
                                @if (data.NumType == 1)
                                {
                                    <td>Default</td>
                                }
                                else
                                {
                                    <td>Customize</td>
                                }
                                <td>@data.defaultValue</td>
                                <td>@data.prefix</td>
                              
                                <td>@data.startValue</td>
                                <td>@data.NumValue</td>
                                <td>
                                    <a class="btn btn-success" onclick="Edit(@data.Id, '@data.fieldName', '@data.NumType', '@data.defaultValue', '@data.prefix', '@data.startValue', '@data.NumValue','@data.separator','@data.isyear','@data.ismonth','@data.isdate','@data.yseparator','@data.mseparator','@data.dseparator')" href="#"><i class="fa fa-edit"></i></a>
                                    <a class="btn btn-danger" href="#"><i class="fa fa-trash-alt"></i></a>
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            $("#country").addClass("active");
            $('#countryTable').DataTable();
            $('#NumType').change(function () {
                if ($('#NumType').val() == 1) {
                    $('#divprefix').hide();
                    $('#year').hide();
                    $('#month').hide();
                    $('#date').hide();
                    $('#start').hide();
                    $('#divNumValue').show();
                    $('#default').show();
                    $('#NumValue').val('');
                } else if ($('#NumType').val() == 3) {
                    $('#divprefix').hide();
                    $('#year').hide();
                    $('#month').hide();
                    $('#date').hide();
                    $('#start').hide();
                    $('#divNumValue').hide();
                    $('#default').hide();
                    $('#NumValue').val(0);
                }
                else
                {
                    $('#default').hide();
                    $('#divprefix').show();
                    $('#year').show();
                    $('#month').show();
                    $('#date').show();
                    $('#start').show();
                    $('#divNumValue').show();
                    $('#NumValue').val('');
                }

            });
            $('#isyear').change(function () {
                if ($('#isyear').prop("checked") == true) {
                    $('#isyear').val(1);
                }
                else {
                    $('#isyear').val(0);
                }
            });
            $('#ismonth').change(function () {
            if ($('#ismonth').prop("checked") == true) {
                $('#ismonth').val(1);
            }
            else {
                $('#ismonth').val(0);
                }
            });
            $('#isdate').change(function () {
            if ($('#isdate').prop("checked") == true) {
                $('#isdate').val(1);
            }
            else {
                $('#isdate').val(0);
                }
            });
        });

        function Edit(Id, fieldName, NumType, defaultValue, prefix, startValue, NumValue,separator,isyear,ismonth,isdate,yseparator,mseparator,dseparator) {
            $("#Id").val(Id);
            $("#fieldName").val(fieldName);
            $("#NumType").val(NumType);
            if ($('#NumType').val() == 1) {
                $('#divprefix').hide();
                $('#year').hide();
                $('#month').hide();
                $('#date').hide();
                $('#start').hide();

            }
            else {
                $('#default').hide();
                $('#divprefix').show();
                $('#year').show();
                $('#month').show();
                $('#date').show();
                $('#start').show();
            }
           // alert(prefix);
            $("#defaultValue").val(defaultValue);
            $("#prefix").val(prefix);
            $("#startValue").val(startValue);
            $("#NumValue").val(NumValue);
            $("#separator").val(separator);
            $("#yseparator").val(yseparator);
            $("#mseparator").val(mseparator);
            $("#dseparator").val(dseparator);
            $("#ismonth").val(ismonth);
            if (ismonth == 1) {
                $('#ismonth').prop("checked", true);
            }
            $("#isyear").val(isyear);
            if (isyear == 1)
            {
                $('#isyear').prop("checked", true);
            }
            $("#isdate").val(isdate);
            if (isdate == 1) {
                $('#isdate').prop("checked", true);
            }
        }
    </script>
}
