@model NavbarViewModel
@{
	ViewData["Title"] = "Add Navbar Item";
	//Layout = "~/Areas/HRPMSEmployee/Views/Shared/_EmployeeForm.cshtml";
}

@section Style{
	<style>
		.redStar {
			color: red;
		}

		.fa-select, .fa-select option {
			font-family: fontAwesome, 'Lato', 'Font Awesome 5 Free';
			font-weight: 300 !important;
			/*color: black !important;*/
			font-size: 16px !important;
			padding: 5px;
		}
	</style>
}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" />

<div class="card" style="width: 100%;">
	<div class="card-body">
		<div class="row">
			<div class="col-8">
				<h5 class="card-title" style="color: black">Create Navbar Item</h5>
			</div>
			<div class="col-4">
				@*<h6 class="identity-box">@Model.employeeNameCode</h6>*@
			</div>
		</div>
		<hr>
		<div class="container">
			<form asp-area="HRPMSEmployee" asp-controller="Navbar" asp-action="Create" method="post" data-parsley-validate="parsley">

				<div asp-validation-summary="All" class="text-danger"></div>

				<div class="row">
					<div class="col-6">
						<div class="form-group row">
							<label for="nameOption" class="col-sm-4 col-form-label">Name Option <span class="redStar">*</span></label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="nameOption" name="nameOption" data-parsley-required="true">
								<input type="hidden" name="Id" id="Id" value="0" />
							</div>
						</div>
					</div>

					<div class="col-6">
						<div class="form-group row">
							<label for="nameOptionBangla" class="col-sm-4 col-form-label">Name Option (Bangla) </label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="nameOptionBangla" name="nameOptionBangla">
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-6">
						<div class="form-group row">
							<label for="area" class="col-sm-4 col-form-label">Area </label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="area" name="area">
							</div>
						</div>
					</div>

					<div class="col-6">
						<div class="form-group row">
							<label for="controller" class="col-sm-4 col-form-label">Controller </label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="controller" name="controller">
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-6">
						<div class="form-group row">
							<label for="action" class="col-sm-4 col-form-label">Action </label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="action" name="action">
							</div>
						</div>
					</div>
                    @*//////////*@
					<div class="col-6">
						<div class="form-group row">
							<label for="imageClass" class="col-sm-4 col-form-label">Image Class </label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="imageClass" name="imageClass">
								@*<select class="form-control fa-select" name="imageClass">
									<option value="fa fa-edit">&#xf044; fa-edit </option>
									<option value="fa fa-plus">&#xf067; fa-plus</option>
									<option value="fa fa-list">&#xf00b; fa-list </option>
									<option value="fa fa-home">&#xf015; fa-home</option>
									<option value="fa fa-search">&#xf002; fa-search</option>
									<option value="fa-thermometer-full">&#xf2c7; fa-thermometer</option>
									<option value="fa fa-graduation-cap">&#xf19d; fa-graduation-cap</option>
									<option value="fa fa-bank">&#xf19c; fa-bank</option>
									<option value="fa-shopping-bag">&#xf290; fa-shopping-bag </option>
									<option value="fa-arrow-right">&#xf061; fa-arrow-right </option>
									<option value="fa-location-arrow">&#xf124; fa-location-arrow </option>

									<option value="fa fa-file-pdf">&#xf1c1; fa-file-pdf</option>
									<option value="fa fa-user">&#xf007; fa-user</option>
									<option value="fa fa-minus-square">&#xf146; fa-minus-square</option>
									<option value="fas fa-object-group">&#xf247; fa-layer</option>
									<option value="fa fa-building">&#xf1ad; fa-building </option>
									<option value="fa fa-random">&#xf074; fa-random</option>
									<option value="fa fa-map-marker">&#xf041; fa-map-marked</option>
									<option value="fad fa-globe">&#xf0ac; fa-globe</option>
									<option value="fad fa-user-plus">&#xf234; fa-user </option>
									<option value="fas fa-book">&#xf02d; fa-book</option>
									<option value="fa fa-code-branch">&#xf126; fa-code-branch</option>
									<option value="share-square">&#xf14d; fa-directions</option>
									<option value="fa fa-user-md">&#xf0f0; fa-user-md</option>
									<option value="fa fa-sitemap">&#xf0e8; fa-sitemap</option>
									<option value="fas fa-chart-bar">&#xf080; fa-chart-bar</option>
									<option value="fas fa-chart-line">&#xf201; fa-chart-line </option>
									<option value="fas fa-columns">&#xf0db; fa-columns</option>
									<option value="fa fa-tasks">&#xf0ae; fa fa-tasks </option>
									<option value="fas fa-database">&#xf1c0; fa-database</option>
									<option value="fa fa-money">&#xf0d6; fa-money</option>
									<option value="fas fa-dollar-sign">&#xf155; fa-dollar</option>
									<option value="fa fa-female">&#xf182; fa-female</option>
									<option value="fas fa-child">&#xf1ae; fa-child</option>
									<option value="fas fa-phone-volume">&#xf2a0; fa-phone</option>
									<option value="fas fa-list-ol">&#xf0cb; fa-list</option>
									<option value="fas fa-align-center">&#xf037; fa-align</option>
									<option value="fas fa-check-square">&#xf14a; fa-check</option>
									<option value="fas fa-user-times">&#xf235; fa-user-times</option>
									<option value="fas fa-male">&#xf183; fa-male</option>
									<option value="fad fa-suitcase">&#xf0f2; fa-suitcase</option>
									<option value="fa fa-language">&#xf1ab; fa-language</option>
									<option value="fa fa-bold">&#xf032; fa-bold</option>
									<option value="fa fa-history">&#xf1da; fa-history  </option>

									<option value="fa fa-glide-g">&#xf2a6; fa-glide-g  </option>
									<option value="fa fa-gears">&#xf085; fa-gears  </option>
									<option value="fa fa-info-circle">&#xf05a; fa-info-circle </option>
									<option value="fa fa-th-list">&#xf00b; fa-th-list</option>
									<option value="fa fa-user-plus">&#xf234; fa-user-plus  </option>
									<option value="fa fa-tree">&#xf1bb; fa-tree</option>
									<option value="fa fa-times">&#xf00d; fa-times </option>
									<option value="fa fa-map-o">&#xf278; fa-map-o</option>
									<option value="fa fa-file">&#xf15b; fa-file</option>
									<option value="fa fa-toggle-off">&#xf204; fa-toggle-off</option>
									<option value="fa fa-calendar">&#xf073; fa-calendar</option>
									<option value="fa fa-tv">&#xf26c; fa-tv</option>
									<option value="fa fa-sellsy">&#xf213; fa-sellsy</option>
									<option value="fa fa-user-secret">&#xf21b; fa-user-secret</option>
									<option value="fa fa-area-chart">&#xf1fe; fa-area-chart</option>
									<option value="fa fa-paste">&#xf0ea; fa-paste</option>
									<option value="fa fa-id-card">&#xf0c0; fa-id-card</option>
									<option value="fa fa-cog">&#xf013; fa-cog</option>
									<option value="fa fa-reply-all ">&#xf122; fa-reply-all </option>
									<option value="fa fa-reply">&#xf112; fa-reply</option>
									<option value="fa fa-google-wallet">&#xf1ee; fa-google-wallet</option>
									<option value="fa fa-funnel-dollar">&#xf657; fa-funnel-dollar</option>
									<option value="fa  fa-line-chart">&#xf201;  fa-line-chart</option>
									<option value="fa fa-calculator">&#xf1ec; fa-calculator</option>
									<option value="fa fa-gear">&#xf013; fa-gear</option>
									<option value="fa fa-hand-o-right">&#xf0a4; fa-hand-o-right</option>
									<option value="fa fa-asterisk">&#xf069; fa-asterisk</option>
									<option value="fa fa-paper-plane-o">&#xf1d9; fa-paper-plane-o</option>
									<option value="fa fa-percent">&#xf295; fa-percent</option>
									<option value="fa fa-th">&#xf00a; fa-th</option>
									<option value="fa fa-trash">&#xf1f8; fa-trash</option>
									<option value="fa fa-lock">&#xf023; fa-lock</option>




								</select>*@
								@*<input type="text" class="form-control" id="imageClass" name="imageClass">*@
							</div>
						</div>
					</div>
				</div>
                @*////////*@
				<div class="row">
					<div class="col-6">
						<div class="form-group row">
							<label for="moduleId" class="col-sm-4 col-form-label">Module <span class="redStar">*</span></label>
							<div class="col-sm-8">
								<select class="form-control" id="moduleId" name="moduleId" data-parsley-required="true">
									<option value="">Select</option>
									@foreach (var item in Model.ERPModules)
									{
										<option value="@item.Id">@item.moduleName</option>
									}
								</select>
							</div>
						</div>
					</div>

					<div class="col-6">
						<div class="form-group row">
							<label for="activeLi" class="col-sm-4 col-form-label">Active Li </label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="activeLi" name="activeLi">
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-6">
						<div class="form-group row">
							<label for="isParent" class="col-sm-4 col-form-label">Category <span class="redStar">*</span></label>
							<div class="col-sm-8">
								<select class="form-control" id="isParent" name="isParent" data-parsley-required="true">
									<option value="">Select</option>
									<option value="2">Child</option>
									<option value="1">Band</option>
									<option value="0">Parent</option>
								</select>
							</div>
						</div>
					</div>

					<div class="col-6">
						<div class="form-group row">
							<label for="status" class="col-sm-4 col-form-label">Status <span class="redStar">*</span></label>
							<div class="col-sm-8">
								<select class="form-control" id="status" name="status" data-parsley-required="true">
									<option value="True">Active</option>
									<option value="False">Inactive</option>
								</select>
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-6">
						<div class="form-group row">
							<label for="parentID" class="col-sm-4 col-form-label">Parent ID </label>
							<div class="col-sm-8">
								<select class="form-control" id="parentID" name="parentID">
									<option value="0">Select</option>
								</select>
							</div>
						</div>
					</div>

					<div class="col-6">
						<div class="form-group row">
							<label for="displayOrder" class="col-sm-4 col-form-label">Display Order </label>
							<div class="col-sm-8">
								<input data-parsley-type="number" class="form-control" id="displayOrder" name="displayOrder">
							</div>
						</div>
					</div>

					<div class="col-6" id="bandSelect">
						<div class="form-group row">
							<label for="parentID" class="col-sm-4 col-form-label">Band ID </label>
							<div class="col-sm-8">
								<select class="form-control" id="bandID" name="bandID">
									<option value="0">Select</option>
								</select>
							</div>
						</div>
					</div>

				</div>

				<hr />
				<button type="submit" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;"><i class="fas fa-save"></i></button>

			</form>
		</div>
	</div>
</div>

<br />
<hr />
<div class="row clearfix">
	<div class="col-12">
		<div class="card mb-4">
			<!-- Card Header - Dropdown -->
			<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
				<h6 class="m-0 font-weight-bold text-primary">Navbar Item List</h6>
			</div>
			<!-- Card Body -->
			<div class="card-body">
				<table class="table table-striped table-bordered" id="navbarItemTable">
					<thead>
						<tr>
							<th>Name Option</th>
							<th>Module</th>
							<th>isParent</th>
							<th>Status</th>
							<th>Parent/Band</th>
							<th>Area</th>
							<th>Controller</th>
							<th>Action</th>
							<th>Operation</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var data in Model.navbars)
						{
						<tr>
							<td>@data.nameOption</td>
							<td>@data.module?.moduleName</td>
							@if (@data.isParent == 0)
							{
								<td>Parent</td>
							}
							else if (@data.isParent == 1)
							{
								<td>Band</td>
							}
							else
							{
								<td>Child</td>
							}
							<td>@data.status</td>
							<td>@data.parentName</td>
							<td>@data.area</td>
							<td>@data.controller</td>
							<td>@data.action</td>
							<td>
								<a class="btn btn-success" onclick="Edit(@data.Id, '@data.nameOption', '@data.nameOptionBangla', '@data.moduleId','@data.area','@data.controller','@data.action','@data.imageClass','@data.activeLi','@data.status','@data.isParent','@data.parentID','@data.displayOrder')" href="#"><i class="fa fa-edit"></i></a>
								@*<a class="btn btn-danger" onclick="Remove(@data.Id)" href="#"><i class="fa fa-trash-alt"></i></a>*@
							</td>
						</tr>
						}

					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

@section Scripts{
	<script>
		var parId = 0;
		var mdlId = 0;
		$(document).ready(function () {
			//$("#bankInfo").addClass("active");
			$('#navbarItemTable').DataTable();
			$('#bandSelect').hide();

			//$('.fa-select').select2();
			$("#moduleId").change(function () {
				var id = $(this).val();
				var isParent = $("#isParent").val();
				if (isParent == 2) {
					isParent = 1
				}
				else if (isParent == 1) {
					isParent = 0
				}
				else if (isParent == 0) {
					isParent = 9
				}
				Common.Ajax('GET', '/global/api/getNavbarItemByParentByModule/' + id + '/' + isParent, [], 'json', ajaxNavbarParents, false);
			});

			$("#isParent").change(function () {
				var id = $("#moduleId").val();
				var isParent = $("#isParent").val();
				if (isParent == 2) {
					isParent = 0;
					$('#bandSelect').show();
				}
				else if (isParent == 1) {
					isParent = 0;
					$('#bandSelect').hide();
				}
				else if (isParent == 0) {
					isParent = 9;
					$('#bandSelect').hide();
				}
				Common.Ajax('GET', '/global/api/getNavbarItemByParentByModule/' + id + '/' + isParent, [], 'json', ajaxNavbarParents, false);
			});

			$("#parentID").change(function () {
				var id = $("#moduleId").val();
				var isParent = $("#parentID").val();
				//alert(id +" " + " "+ isParent);
				Common.Ajax('GET', '/global/api/GetNavbarItemByParentIdByModule/' + id + '/' + isParent, [], 'json', ajaxNavbarParentsforChild, false);
			});


		});

		function ajaxNavbarParents(response) {
			var options = '<option value="0">Select</option>';
			$.each(response, function (i, item) {
				options += '<option value="' + item.Id + '">' + item.nameOption + '</option>';
			});
			$('#parentID').empty();
			$('#parentID').append(options);
		}

		function ajaxNavbarParentsforChild(response) {
			//console.log(response);
			var options = '<option value="0">Select</option>';
			$.each(response, function (i, item) {
				options += '<option value="' + item.Id + '">' + item.nameOption + '</option>';
			});
			$('#bandID').empty();
			$('#bandID').append(options);
		}

		function Edit(Id, nameOption, nameOptionBangla, moduleId, area, controller, action, imageClass, activeLi, status, isParent, parentID, displayOrder) {
			$("#Id").val(Id);
			$("#nameOption").val(nameOption);
			$("#nameOptionBangla").val(nameOptionBangla);
			$("#area").val(area);
			$("#controller").val(controller);
			$("#action").val(action);
			$("#imageClass").val(imageClass);
			$("#activeLi").val(activeLi);
			$("#status").val(status);
			$("#displayOrder").val(displayOrder);

			$("#moduleId").val(moduleId);
			$("#isParent").val(isParent);
			var category = isParent;
			if (category == 2) {
				category = 0;
				$('#bandSelect').show();
			}
			else if (category == 1) {
				$('#bandSelect').hide();
				category = 0;
				Common.Ajax('GET', '/global/api/getNavbarItemByParentByModule/' + moduleId + '/' + category, [], 'json', ajaxNavbarParents, false);
				$("#parentID").val(parentID);
				return false;
			}
			else if (category == 0) {
				$('#bandSelect').hide();
				category = 9;
				return false;
			}
			Common.Ajax('GET', '/global/api/getNavbarItemByParentByModule/' + moduleId + '/' + category, [], 'json', ajaxNavbarParents, false);
			parId = parentID;
			mdlId = moduleId;
			Common.Ajax('GET', '/global/api/GetNavbarParentIdById/' + parentID, [], 'json', ajaxGetNavbarParentIdById, false);
		}

		function ajaxGetNavbarParentIdById(response) {
			$("#parentID").val(response);
			Common.Ajax('GET', '/global/api/GetNavbarItemByParentIdByModule/' + mdlId + '/' + response, [], 'json', ajaxNavbarParentsforChild, false);
			$("#bandID").val(parId);
		}

		function Remove(Id) {
			chk = confirm('Do you want to delete this?');
			if (chk) {
				location.replace("/ERPSettings/Navbar/Delete/" + Id);
			} else {
				return false;
			}
		}

	</script>
}
