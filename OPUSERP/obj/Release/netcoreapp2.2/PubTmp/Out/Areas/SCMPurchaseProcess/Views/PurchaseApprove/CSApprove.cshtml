@model CSRequisitionList
@{
    ViewData["Title"] = "CS Approve";
}
<style>
    .cardimg {
        
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .boxDesign {
        transition: .3s all;
        margin-left: 42px;
        padding: 1px;
        margin-right: 22px;
        height: 260px;
        width: 190px;
    }

        .boxDesign:hover {
            transform: scale(.9);
            border: 1px solid black;
            box-shadow: 1px 1px gray;
        }

    .cardimg img {
        /*margin-left: 48px;*/
        height: 98px;
        width: 98px;
        margin-top: -17px;
        border-radius: 50%;
        border: 1px solid;
        /*padding-top: -2px;*/
    }
</style>
<div class="row">
    <div class="col-md-6" style="padding-right:0px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12">
                <div class="card" style="height: 234px;">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; CS Information</label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;">
                        <dl class="row" style="color:#5b5959;">
                            <dt class="col-sm-6">
                                <span>CS No</span>
                            </dt>
                            <dd class="col-sm-6">
                                <span>: @Model.cSMaster?.csNo</span>
                            </dd>
                            <dt class="col-sm-6">
                                <span>CS Creation Date</span>
                            </dt>
                            <dd class="col-sm-6">
                                <span>: @Model.cSMaster?.csDate?.ToString("dd-MMM-yyyy")</span>
                            </dd>
                            <dt class="col-sm-6">
                                <span>CS Created By</span>
                            </dt>
                            <dd class="col-sm-6">
                                <span id="VOComments">: @Model.cSMaster?.createdBy</span>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6" style="padding-right:15px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-9 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; PR Information</label>
                        <button onclick="location.href='@Url.Action("Index", "PurchaseApprove","SCMPurchaseProcess")'" class="btn btn-info btn-sm col-sm-2 p-0 m-0">Back To List</button>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;">
                        <dl class="row" style="color:#5b5959;">
                            <dt class="col-sm-6">
                                <span>PR No</span>
                            </dt>
                            <dd class="col-sm-6">
                                <span>: @Model.cSMaster?.requisition?.reqNo</span>
                            </dd>
                            @if (Model?.approverPanel?.nextApproverId > 0)
                            { <dt class="col-sm-6">
                                    <span>Next Approver</span>
                                </dt>

                            <dd class="col-sm-6">

                                <span>: @Model?.approverPanel?.EmpName</span>

                            </dd>
                            }

                            @*<dt class="col-sm-6">
            <span>Requisition</span>
        </dt>
        <dd class="col-sm-6">
            <span>: @Model.approverPanel?.nextApproverId</span>
        </dd>*@
                            <dt class="col-sm-6">
                                <span>PR Approved Date</span>
                            </dt>
                            <dd class="col-sm-6">
                                <span>: @Model.cSMaster?.requisition?.reqDate?.ToString("dd-MMM-yyyy")</span>
                            </dd>
                            <dt class="col-sm-6">
                                <span>Expected Delivery Date</span>
                            </dt>
                            <dd class="col-sm-6">
                                <span id="VOComments">: @Model.cSMaster?.requisition?.reqDate?.ToString("dd-MMM-yyyy")</span>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6" style="padding-right:5px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12" style="padding-right:5px;padding-right:10px;">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; Procurement Type</label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;">
                        <input class="form-control" id="procurementType" name="procurementType" value="@Model.cSMaster?.procurementType?.procurementTypeName" readonly />
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12" style="padding-left:15px; padding-right:10px; padding-top:10px;">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; Procurement Value</label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;">
                        <input class="form-control" id="procurementValue" value="@Model.cSMaster?.procurementValue?.procurementValueName" readonly />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6" style="padding-right:15px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; PR Attachment</label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;max-height:180px;min-height:180px;overflow-x:scroll;">
                        <table id="dtAttachment" class="table table-striped table-bordered">
                            <thead style="background-color:#c6c3c3">
                                <tr>
                                    <th style="width:30%">File Name</th>
                                    <th style="width:30%">File</th>
                                    <th style="width:15%;">Action</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyAttachment"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12" style="padding-right:5px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12" style="padding-right:5px;padding-right:10px;">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; <b>Quotation Information</b></label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;">
                        <div style="margin-bottom:25px;border:1px solid black;">
                            <div id="pivotTable" style="max-height:200px;overflow-y:scroll;"></div>
                        </div>
                        <div style="margin-bottom:0px;border:1px solid black;">
                            <div id="CSTable" style="max-height:200px;overflow-y:scroll"></div>
                        </div>

                        <div class="row" style="padding:8px 0px 0px 0px;">
                            <label class="col-md-9" style="font-weight:bolder;text-align:right;">Total Proposed Procurement Value :</label>
                            <div class="col-md-3" style="padding-top:0px;">
                                <input type="text" class="form-control" readonly id="lblAllGrandTotal" style="text-align:right;" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <br />
    <input type="hidden"  id="reqId" value="@Model.cSMaster?.requisitionId" />
    <input type="hidden"  id="projectId" value="@Model.cSMaster?.requisition?.projectId" />
    <div class="col-md-12" style="margin-top: 1%;">
        <div class="card">
            <div class="card-header">
                <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; Approval Matrix</label>
            </div>
            <div class="card-body">
                <div class="row" id="ApprovarPanel">

                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6" style="padding-right:5px;">
        <div style="height:10px;"></div>

        <div class="row">

            <div class="col-sm-12" style="padding-right:5px;padding-right:10px;">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; Justification for recommendation</label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;height:278px;" id="divJustification">
                        <table class="table table-responsive" id="tblProcurement" style="font-size:12px;margin-top: 42px;">
                            @foreach (var data in Model.justifications)
                            {
                                <tr>
                                    <td style="padding-top:0px;padding-bottom:0px;">@data.justificationType?.justificationTypeName</td>
                                    <td style="padding-top:0px;padding-bottom:0px;">
                                        @if (@data.isJustify == 1)
                                        {
                                            <input type="checkbox" id="ck-@data.justificationTypeId" checked class="justify" disabled="disabled" />
                                        }
                                        else
                                        {
                                            <input type="checkbox" id="ck-@data.justificationTypeId" class="justify" disabled="disabled" />
                                        }
                                        <label style="font-size:1em" for="ck-@data.justificationTypeId" data-text-true="Yes" data-text-false="No"><i></i></label>
                                    </td>
                                    <td style="padding-top:0px;padding-bottom:0px;"><input type="text" class="form-control input-sm" value="@data.justificationValue" id="txt-@data.justificationTypeId" readonly="readonly" /></td>
                                </tr>
                            }
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6" style="padding-right:15px;padding-top: 10px;">

        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; CS Supporting Documents Attachment</label>
                    </div>
                    @*<div class="card-body p-3 m-0" id="dtCSAttachment" style="padding-bottom:0px;max-height:180px;min-height:180px;overflow-x:scroll;">*@
                    @*<table id="dtCSAttachment" class="table table-striped table-bordered">
                               <thead style="background-color:#c6c3c3">
                                 <tr>
                        <th style="width:30%">File Name</th>
                        <th style="width:30%">Subject</th>
                        <th style="width:20%">File</th>
                        <th style="width:10%;">Action</th>
                                  </tr>
                             </thead>
                            <tbody id="tbodyAttachment"></tbody>
                            </table>*@



                    <div class="row card-body" id="dtCSAttachment" style="padding-bottom:0px;height: 278px;">

                        <div class="row" id="divPanel1">


                        </div>

                    </div>



                </div>
                @*</div>*@
            </div>
        </div>
    </div>
</div>


  <div class="row" >
    <div class="col-md-3" style="padding-right:5px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12" style="padding-right:5px;padding-right:10px;">
               
                    <div class="card">
                        <div class="card-header" style="padding:6px 0px 5px 3px;">
                            <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; Next Approver</label>
                        </div>
                        @*<input type="text" name="name"  value="@Model?.approverPanel?.nextApproverId" />
                <input type="text" name="name"  value="@Model?.cSMaster?.csStatus" />*@

                        <div class="card-body p-3 m-0" style="padding-bottom:0px;max-height:180px;min-height:180px; overflow: scroll;">
                            @if (Model?.approverPanel?.nextApproverId > 0)
                            {
                                <div class="row">
                                    <div class="col-md-12">
                                        @if (Model?.approverPanel?.imagePath == "")
                                        {
                                            <img src="~/images/defaultperson.png" class="card-img-top" style="width: 100px;margin-left: 30%; margin-bottom: 5px;" />
                                        }
                                        else
                                        {
                                            <img src="~/images/@Model?.approverPanel?.imagePath" class="card-img-top" style="width: 100px;margin-left: 30%; margin-bottom: 5px;" />
                                        }
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label>Name</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input class="form-control" id="nextAppName" name="nextAppName" value="@Model?.approverPanel?.EmpName" readonly />
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-md-12">
                                        <label>Designation</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input class="form-control" id="nextAppDesignation" name="nextAppDesignation" value="@Model?.approverPanel?.DesignationName" readonly />
                                    </div>
                                </div>
                            }
                        </div>


                    </div>

           
                </div>
        </div>
    </div>


    <div class="col-md-6" style="padding-right:5px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header" style="padding:6px 0px 5px 3px;">
                        <label style="padding:0px 0px 0px 10px;font-size:16px;font-weight:600" class="col-sm-10 pull-left"><i class="fa fa-th-list fa-sm"></i>&nbsp;&nbsp; Approver Status</label>
                    </div>
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;max-height:180px;min-height:180px;overflow-x:scroll;">
                        
                                        <table id="AppprovedGrid" class="table table-striped table-bordered">
                                            <thead style="background-color:#c6c3c3">
                                                <tr>
                                                    <th style="width:30%">Process By</th>
                                                    <th style="width:30%">Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var data in Model.approerPanelList)
                                                {
                                                    <tr>
                                                        <td>@data.EmpName</td>
                                                        <td>@data.ProcessDate.Substring(0, 19)</td>
                                                        @*<td>@data.notes</td>*@
                                                    </tr>
                                                }

                                                @*<tr>
                                    <td>@Model.approerPanelList.FirstOrDefault().EmpName</td>
                                    <td>@Model.approerPanelList.FirstOrDefault().ProcessDate.Substring(0, 19)</td>
                                </tr>*@
                                            </tbody>
                                        </table>
                                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-3" style="padding-right:20px;padding-left:10px;">
        <div style="height:10px;"></div>
        <div class="row">
            <div class="col-sm-12" style="padding-right:5px;padding-right:10px;">
                <div class="card">
                    <div class="card-body p-3 m-0" style="padding-bottom:0px;max-height:224px;min-height:224px;">
                        <form id="frmCSApprove">
                            <input type="hidden" id="csId" name="csId" value="@ViewBag.CSID" />
                            <input type="hidden" name="csNo" id="csNo" value="@Model.cSMaster.csNo" />
                            <div class="row">
								<div class="col-md-12">
									<label>Remark</label>
									<input type="hidden" class="form-control" id="procurementValue1" name="procurementValue" value="@Model.cSMaster?.procurementValue?.Id" readonly />
								</div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <textarea rows="3" class="form-control" id="appRemark" name="appRemark"></textarea>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <select class="form-control" id="approveType" name="approveType">
                                        @*<option value=""> Select</option>*@
                                        <option value="1"> Approve</option>
                                        <option value="4"> Return</option>
                                        <option value="-1"> Reject</option>
                                    </select>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-12">
                                    <input type="button" style="width:100%;" class="btn btn-sm btn-success" id="btnApprove" value="Approve" />
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


    <div class="modal fade" id="itemDetailsEdit" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="">Item Details Edit </h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="frmcsDetails" aria- data-parsley-validate="parsley" autocomplete="off">
                        <div class="row">
                            <div class="col-6">
                                <div class="form-group row">
                                    <label class="col-md-4 col-lg-4 col-sm-12" style="color:black;" for="itemCode">Item Code </label>
                                    <div class="col-md-8 col-lg-8 col-sm-12">
                                        <input type="text" class="form-control" id="itemCode" name="itemCode" autocomplete="off" readonly />
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group row">
                                    <label class="col-md-4 col-lg-4 col-sm-12" style="color:black;" for="itemName">Item Name </label>
                                    <div class="col-md-8 col-lg-8 col-sm-12">
                                        <input type="text" class="form-control" id="itemName" name="itemName" autocomplete="off" readonly />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <table class="table table-bordered" id="tblitemDetails">
                                    <thead>
                                        <tr>
                                            <th style="text-align:center;width:40%;">Supplier</th>
                                            <th style="text-align:center;width:15%;">QTY</th>
                                            <th style="text-align:center;width:15%;">Rate</th>
                                            <th style="text-align:center;width:30%;">Sub Total</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6"></div>
                            <div class="col-6">
                                <div class="form-group row">
                                    <label class="col-md-4 col-lg-4 col-sm-12" style="color:black;text-align:right;" for="total">Total </label>
                                    <div class="col-md-8 col-lg-8 col-sm-12">
                                        <input type="text" class="form-control" id="total" name="total" readonly style="text-align:right;" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <button type="button" name="btnSaveCsDetail" id="btnSaveCsDetail" style="float:right;margin-left:10px;" class="btn btn-success">Edit</button>
                                <button class="btn btn-secondary" style="float:right;" type="button" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    @section Scripts{
        <script type="text/javascript">
    var deleteClm = 0;
    var AddSupplierList = [];
    var Indexattach = 0;
    var indexPRAttach = 0;
    var arr = [];
    var GrandTotalPrice = 0;

    $(document).ready(function () {
		var masterId = @Model.cSMaster?.Id;
        var projectId = @Model.cSMaster?.requisition?.projectId;
     
        Common.Ajax('GET', '/SCMPurchaseProcess/PurchaseProcess/GetReqApprovalMatrixByMasterAndProjectIdR?masterId=' + masterId + '&projectId=' + projectId, [], 'json', GetReqApprovalMatrixByMasterId, false);
        $('#csListTable').DataTable();
        $("#education").addClass("active");
        LoadAttachment();
        QuotationDetails();
        CSDetails();

        //$('#btnApprove').click(function () {
        //    CSApproveProcess();
        //})

        $("#btnApprove").click(function (e) {
            let csId = parseInt($('#csId').val()) ? parseInt($('#csId').val()) : 0;
			let appType = $('#approveType').val();
			//alert(appType)
            var txtAppType = "";
            var conAppType = "";

            if (csId == 0) {
                swal("Attention!", "Invalid Attempt!!!", "warning");
                return false;
            }
            else if (appType == '') {
                swal("Attention!", "Please Select Approve Type!!", "warning");
                return false;
            }

            else if (appType != '1' && $('#appRemark').val().trim() == '') {
                swal("Attention!", "Please Entred Remark!!", "warning");
                return false;
            }
            e.preventDefault();

            if (appType == "4") {//return
                txtAppType = "Do you want to return this record!";
                conAppType = "Yes, return it!";
            }
            else if (appType == "-1") {// reject
                txtAppType = "Do you want to reject this record!";
                conAppType = "Yes, reject it!";
            }
            else if (appType == "1"){//approve
                txtAppType = "Do you want to approve this record!";
                conAppType = "Yes, approve it!";
            }

            var form = $("#frmCSApprove");
            swal({
                title: 'Are you sure?', text: txtAppType, type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: conAppType
			}).then(function () {
                //$("#btnApprove").prop('disabled', true);
                $.ajax({
                    url: '@Url.Action("SaveCSApprove", "PurchaseApprove")',
					type: 'POST',
					data: form.serialize(),
                    success: function (records) {
                        if (appType=="-1"){
							swal('Rejected!', 'Your CS has been rejected.', 'success').then(function () {
								if ($('#procurementValue').val() == 'Single Source') {
									window.location = '@Url.Action("IndexSingleOngoing", "PurchaseApprove")';
								}
								else {
									window.location = '@Url.Action("Index", "PurchaseApprove")';
								}
                            })
                        }
                        else if (appType=="4"){
                            swal('Returned!','Your CS has been returned.','success').then(function(){
                                if ($('#procurementValue').val() == 'Single Source') {
									window.location = '@Url.Action("IndexSingleOngoing", "PurchaseApprove")';
								}
								else {
									window.location = '@Url.Action("Index", "PurchaseApprove")';
								}
                            })
                        }
                        else{
                            swal('Approved!','Your CS has been approved.','success').then(function(){
                                if ($('#procurementValue').val() == 'Single Source') {
									window.location = '@Url.Action("IndexSingleOngoing", "PurchaseApprove")';
								}
								else {
									window.location = '@Url.Action("Index", "PurchaseApprove")';
								}
                            })
                            //$("#btnApprove").prop('disabled', false);
                        }
                    },
                    failure: function () {
                        swal("unable to approve!!");
                        $("#btnApprove").prop('disabled', false);
                    }
                });
            })
        });

        $('#approveType').change(function () {
            if ($('#approveType').val() == "1") {
                $('#btnApprove').val("Approve");
                $("#btnApprove").css({ "background-color": "#33a55d" });
            }
            else if ($('#approveType').val() == "4") {
                $('#btnApprove').val("Return");
                $("#btnApprove").css({ "background-color": "#bab532" });
            }
            else if ($('#approveType').val() == "-1") {
                $('#btnApprove').val("Reject");
                $("#btnApprove").css({ "background-color": "#ed3423" });
            }
            else {
                $('#btnApprove').val("Approve");
                $("#btnApprove").css({ "background-color": "#33a55d" });
            }
        });

        $("#btnSaveCsDetail").click(function (e) {
            let rowCount = $("#tblitemDetails tbody>tr").length;

            if (rowCount < 1) {
                alert("Please Select Minimum One Item!!");
                return false;
            }
            e.preventDefault();

            var form = $("#frmcsDetails");
            $.ajax({
                url: '/SCMPurchaseProcess/PurchaseApprove/UpdateCSDetailApproval',
                data: form.serialize(),
                type: 'POST',
                success: function (records) {
                    //QuotationDetails();
                    //CSDetails();
                    window.location.href = "/SCMPurchaseProcess/PurchaseApprove/CSApprove?csId=" +@ViewBag.CSID ;
                    $("#itemDetailsEdit").modal("hide");

                }
            });
        });


        Common.Ajax('GET', '/global/api/GetAttachmentListByMatrixType/' + @ViewBag.CSID+'/'+2, [], 'json', LoadCSAttachment);

    });

            function GetReqApprovalMatrixByMasterId(response) {
                console.log("ok3");
                console.log(response);
                var option = "";
                $.each(response, function (i, item) {
                    if (item.imagePath == '' || item.imagePath == null) {
                        item.imagePath = '/EmpImages/defaultperson.png'
                    }
                    item.sequenceNo = parseInt(item.sequenceNo) + parseInt(1);

                    option += `<div class="card col-md-3 p-0 text-center "  style="" >
								    <div class="card-header">
									    <span class="font-weight-bold">${item.EmpName}</span>
								    </div>
								    <div class="card-body" style="height:120px;">
									    <img   src="${item.imagePath}" style="height: 80px; width: 80px; border-radius: 50%; border: 1px solid gray;" />
								    </div>
								    <div class="card-footer">
									    <span class="badge badge-success">${item.sequenceNo}</span>
								    </div>
							    </div>`

                });
                $('#ApprovarPanel').empty();
                $('#ApprovarPanel').append(option);
            }

    function QuotationDetails(){
        var QuoDetails = @Html.Raw(Json.Serialize(Model.quotationDetailsVMs));
        var dataArray = [];

        for (var x in QuoDetails) {
            dataArray.push(QuoDetails[x]);
        }

        var rowIndex = "ItemSpac";
        var ItemCode = "ItemCode";
        var ItemName = "ItemName";
        var ReqQTY = "ReqQTY";
        var ApproxCost = "ApproxCost";
        var AprQty = "AprQty";
        var colIndex = "BusinessName";
        var dataIndex = "QuoRate";
        var DataTable = getPivotArray(dataArray, rowIndex, ItemCode, ItemName, ReqQTY, ApproxCost, AprQty, colIndex, dataIndex);

        $('#pivotTable').html(arrayToHTMLTable(DataTable));
    }

    function getPivotArray(dataArray, rowIndex, ItemCode, ItemName, ReqQTY, ApproxCost, AprQty, colIndex, dataIndex) {

        var result = {}, ret = [];
        var result1 = {};
        var result2 = {};
        var result3 = {};
        var result4 = {};
        var result5 = {};
        var newCols = [];

        for (var i = 0; i < dataArray.length; i++) {

            if (!result[dataArray[i][rowIndex]]) {
                result[dataArray[i][rowIndex]] = {};
            }
            if (!result1[dataArray[i][ItemCode]]) {
                result1[dataArray[i][ItemCode]] = {};
            }
            //Extra Column
            if (!result2[dataArray[i][ItemName]]) {
                result2[dataArray[i][ItemName]] = {};
            }
            if (!result3[dataArray[i][ReqQTY]]) {
                result3[dataArray[i][ReqQTY]] = {};
            }
            if (!result4[dataArray[i][ApproxCost]]) {
                result4[dataArray[i][ApproxCost]] = {};
            }
            if (!result5[dataArray[i][AprQty]]) {
                result5[dataArray[i][AprQty]] = {};
            }

            result[dataArray[i][rowIndex]][dataArray[i][colIndex]] = [dataArray[i][dataIndex]];

            //To get column names
            if (newCols.indexOf(dataArray[i][colIndex]) == -1) {
                newCols.push(dataArray[i][colIndex]);
            }
        }

        //newCols.sort();

        //console.log(newCols);
        var item = [];
        var ItemCode = [];
        var ItemName = [];
        var PRQTY = [];
        var UnitPrice = [];
        var QTY = [];

        //Add Header Row
        item.push('ID');
        item.push('Code');
        item.push('Item');

        item.push('PR QTY');
        item.push('Unit Price');
        item.push('QTY');
        item.push.apply(item, newCols);
        ret.push(item);

        for (var key in result1) {
            ItemCode.push(key);
        }

        for (var key in result2) {
            ItemName.push(key);
        }

        for (var key in result3) {
            PRQTY.push(key);
        }

        for (var key in result4) {
            UnitPrice.push(key);
        }

        for (var key in result5) {
            QTY.push(key);
        }

        //Add content

        var A = 0;
        var B = 0;
        var C = 0;
        var D = 0;
        var F = 0;
        var X = 0;

        for (var key in result) {
            item = [];
            item.push(key);

            //Extra Column

            item.push(ItemCode[A]);
            A = A + 1;

            item.push(ItemName[F]);
            F = F + 1;

            item.push(PRQTY[B]);
            B = B + 1;

            item.push(UnitPrice[C]);
            C = C + 1;

            item.push(QTY[D] || "1");
            D = D + 1;

            for (var i = 0; i < newCols.length; i++) {
                item.push(result[key][newCols[i]] || "-");
            }
            ret.push(item);
        }
        return ret;
    }

    function arrayToHTMLTable(DataTable) {
        var result = "<table border='1' style='width:100%;'>";
        var colspn = DataTable[0, 0].length;
        var colSupp = DataTable[0, 0].length - 4;
        result += "<tr><td colspan='" + colspn + "' style='background-color:#e6e7ed;'><b style='color:#fe48a6;font-size:1em;'>CS:Supplier and Unit Price</b></td></tr>";
        result += "<tr style='background-color:white;'><td colspan='4' style='text-align:center'>PR Information</td><td colspan='" + colSupp + "' style='text-align:center'>Comparative statment in unit price including tax</td></tr>";
        for (var i = 0; i < DataTable.length; i++) {
            var backcolor = '';
            if (i % 2 == 0) {
                backcolor = "background-color:#e6e7ed;font-size:12px;";
            }
            else {
                backcolor = "background-color:#ffffff;font-size:12px;";
            }
            result += "<tr style=" + backcolor + ">";
            for (var j = 1; j < DataTable[i].length; j++) {
                if (j > 4) {
                    if (i == 0) {
                        result += "<td  style='text-align:center'>&nbsp;&nbsp;&nbsp;&nbsp;" + DataTable[i][j] + "&nbsp;</td>";
                    } else {
                        result += "<td  style='text-align:right'>&nbsp;&nbsp;&nbsp;&nbsp;" + DataTable[i][j] + "&nbsp;</td>";
                    }

                } else {
                    result += "<td  style='text-align:center'>&nbsp;&nbsp;&nbsp;&nbsp;" + DataTable[i][j] + "&nbsp;&nbsp;&nbsp;&nbsp;</td>";
                }

            }
            result += "</tr>";
        }
        result += "</table>";

        return result;
    }

    function CSDetails() {
        var QuoDetails = @Html.Raw(Json.Serialize(Model.cSDetailsVMs));
        $.each(QuoDetails, function (index, E) {
            var TotalAppx = parseInt(E.Total);
            GrandTotalPrice = TotalAppx + GrandTotalPrice;
            $("#lblAllGrandTotal").val(GrandTotalPrice).number(true, 2);
        });

        var dataArray = [];

        for (var x in QuoDetails) {
            dataArray.push(QuoDetails[x]);
        }
        var ReqDetailID = "ReqDetailID";
        var rowIndex = "ItemSpac";
        var ItemCode = "ItemCode";
        var ItemName = "ItemName";
        var ReqQTY = "ReqQTY";
        //var OrderQty = "OrderQty";
        var AprQty = "AprQty";
        var colIndex = "BusinessName";
        var dataIndex = "CONCATTotal";

        var DataTable = ConvertToCSTable(dataArray, rowIndex, ReqDetailID, ItemCode, ItemName, ReqQTY, colIndex, dataIndex);

        $('#CSTable').html(CSarrayToHTMLTable(DataTable));
    }

    function ConvertToCSTable(dataArray, rowIndex, ReqDetailID, ItemCode, ItemName, ReqQTY, colIndex, dataIndex) {
        var result = {}, ret = [];
        var result1 = {};
        var result2 = {};
        var result3 = {};
        var result4 = {};
        var newCols = [];

        for (var i = 0; i < dataArray.length; i++) {
            if (!result[dataArray[i][rowIndex]]) {
                result[dataArray[i][rowIndex]] = {};
            }
            //Extra Column
            if (!result1[dataArray[i][ItemCode]]) {
                result1[dataArray[i][ItemCode]] = {};
            }
            if (!result2[dataArray[i][ItemName]]) {
                result2[dataArray[i][ItemName]] = {};
            }
            if (!result3[dataArray[i][ReqQTY]]) {
                result3[dataArray[i][ReqQTY]] = {};
            }
            if (!result4[dataArray[i][ReqDetailID]]) {
                result4[dataArray[i][ReqDetailID]] = {};
            }

            result[dataArray[i][rowIndex]][dataArray[i][colIndex]] = [dataArray[i][dataIndex]];

            //To get column names
            if (newCols.indexOf(dataArray[i][colIndex]) == -1) {
                newCols.push(dataArray[i][colIndex]);
            }
        }
        // console.log(result2);
        newCols.sort();
        //console.log(newCols);
        var item = [];
        var Code = [];
        var ReqDetailID = [];
        var ItemCode = [];
        var PRQTY = [];
        var OrderQty = [];

        //Add Header Row
        item.push('Item Spec');
        item.push('Code');
        item.push('Item');
        item.push('PR QTY');
        //item.push('OrderQty');
        item.push.apply(item, newCols);
        ret.push(item);

        for (var key in result1) {
            ItemCode.push(key);
        }
        for (var key in result2) {
            Code.push(key);
        }

        for (var key in result3) {
            PRQTY.push(key);
        }

        for (var key in result4) {
            ReqDetailID.push(key);
        }

        //Add content
        var A = 0;
        var B = 0;
        var C = 0;
        var D = 0;

        for (var key in result) {
            item = [];
            item.push(key);

            //Extra Column
            //item.push(ReqDetailID[C]);
            //C = C + 1;
            item.push(ItemCode[D] || ItemCode[C]);
            D = D + 1;
            item.push(Code[A] || Code[C]);
            A = A + 1;
            item.push(PRQTY[B] || PRQTY[C]);
            B = B + 1;

            for (var i = 0; i < newCols.length; i++) {
                item.push(result[key][newCols[i]] || "-");
            }

            ret.push(item);
        }
        return ret;
    }

    function CSarrayToHTMLTable(DataTable) {
        var result = "<table border='1' style='width:100%;'>";
        var cscolspn = DataTable[0, 0].length;
        var cscolSupp = DataTable[0, 0].length - 3;
        result += "<tr><td colspan='" + cscolspn + "' style='background-color:#e6e7ed;color:#fe48a6;font-size:1em;'><b style='color:#fe48a6;font-size:1em;'>Recommandation:Supplier and QTY</b></td></tr>";
        result += "<tr style='background-color:white;'><td colspan='3' style='text-align:center;width:350px;'>PR Information</td><td colspan='" + cscolSupp + "' style='text-align:center'>Supplier Order QTY and Value</td></tr>";
        for (var i = 0; i < DataTable.length; i++) {
            console.log(DataTable);
            var backcolor = '';
            if (i % 2 == 0) {
                backcolor = "background-color:#e6e7ed;font-size:12px;";
            }
            else {
                backcolor = "background-color:#ffffff;font-size:12px;";
            }

            result += "<tr style=" + backcolor + ">";
            if (i <= 0) {
                result += "<td style='width:35px;text-align:center'>Edit</td>";
            }
            else {
                result += "<td style='width:35px;text-align:center'><a href='javascript:void(0)' title='Edit' onclick='EditItem(" + '"' + DataTable[i][1].replace(/\<label style="display:none">/g, "").replace(/label>/g, "").replace(/\</g, "").replace('/', "") + '"' + ")'><i class='fa fa-edit'></i></a></td>";
            }

            for (var j = 1; j < DataTable[i].length; j++) {
                if (j > 3) {
                    result += "<td  style='width:220px;'>" + DataTable[i][j] + "</td>";
                }
                else {
                    result += "<td style='text-align:center;'>" + DataTable[i][j] + "</td>";
                }
            }
            result += "</tr>";
        }
        result += "</table>";
        return result;
    }


    function LoadAttachment() {
        var rowno = 0
        $.ajax({
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            url: '/SCMRequisition/RequisitionApprove/GetAttachmentListByMatrixType?masterId=' + @Model.cSMaster?.requisitionId,
            data: {},
            dataType: 'json',
            async: true,
            success: function (attachments) {
                var index = 1;
                var dtTable = $("#dtAttachment");
                var tableBody = dtTable.find('tbody');
                tableBody.empty();
                $.each(attachments, function (index, E) {
                    rowno = rowno + 1;
                    var filePath = '/Upload/'+E.fileName
                    $('#SubjectName').val(E.Subject);
                    if (E.FilePath != "") {
                        if (E.MimeType == "application/msword" || E.MimeType == "application/pdf" || E.MimeType == "application/x-msexcel" || E.MimeType == "application/octet-stream" || E.MimeType == "text/plain" || E.MimeType == "application/vnd.openxmlformats-officedocument.wordprocessingml.document" || E.MimeType == "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") {
                            tableBody.append(
                                '<tr id=' + rowno + '>' +
                                '<td>' + E.fileName + '</td>' +

                                '<td><i class="fa fa-file" style="font-size:40px;color:lightgray"> </i></td>' +
                                '<td><a href=' + "'" + filePath + "'" + '  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a></td>' +
                                '</tr>')
                        }
                        else {
                            tableBody.append(
                                '<tr id=' + rowno + '>' +
                                '<td>' + E.fileName + '</td>' +

                                '<td style="height:50px;width: 45px; background - color:lightgray"><img src=' + "'" + filePath + "'" + ' height=50 width=45 /></td>' +
                                '<td><a href=' + "'" + filePath+ "'" + '  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a></td>' +
                                '</tr>')
                        }
                    }
                    index = index + 1;
                });
                $('#AjaxLoader').hide()
            },
            error: function (request, status, error) {
                alert(request.statusText + "/" + request.statusText + "/" + error);
            }
        });
    }

    function LoadCSAttachment(response) {
        var rowno = 0;
        //var dtTable = $("#dtCSAttachment");
        //var tableBody = dtTable.find('tbody');
        //tableBody.empty();

        var dtTable = $("#dtCSAttachment");
        var cardbody = dtTable.find('#divPanel1');

        cardbody.empty();
        $.each(response, function (index, E) {
            rowno = rowno + 1;
            var filePath = '/Upload/CS/' + E.fileName

            if (E.FilePath != "") {
                if (E.MimeType == "application/msword" || E.MimeType == "application/pdf" || E.MimeType == "application/x-msexcel" || E.MimeType == "application/octet-stream" || E.MimeType == "text/plain" || E.MimeType == "application/vnd.openxmlformats-officedocument.wordprocessingml.document" || E.MimeType == "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
                {
                    cardbody.append(
                        //'<tr id=' + rowno + '>' +
                        //'<td>' + E.fileName + '</td>' +
                        //'<td>' + E.subject + '</td>' +
                        //'<td><i class="fa fa-file" style="font-size:30px;color:lightgray"> </i></td>' +
                        //'<td><a href=' + "'" + filePath + "'" + '  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a></td>' +
                        //'</tr>')

                        `<div class="card div${rowno} boxDesign" id="btnTotalLead">

                             <i class="fa fa-file" style="font-size:40px;color:lightgray"> </i>
                                    <p class="card-text" style="margin-bottom: 1%; text-align: center !important;"><strong>File Name :</strong>${E.fileName}</p>
                                  <p class="card-text" style="margin-bottom: 1%; text-align: center !important;"><strong>Subject :</strong>${E.subject}</p>


                                <div class="card-body" style="height:120px;">
                                       <div class="cardimg">
                                        <img class="card-img-top" src="${filePath}" alt="Card image">
                                      </div>


                                      </div>
                                        <div class="card-footer text-center font-weight-bold" style:"margin-top: -7%;">


                                     <a href="${filePath}"  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a>

                                  </div>

                             </div>`
                        )
                }
                else {
                    //cardBody.append(
                    //    '<tr id=' + rowno + '>' +
                    //    '<td>' + E.fileName + '</td>' +
                    //    '<td>' + E.subject + '</td>' +
                    //    '<td style="height:40px;width: 40px; background - color:lightgray"><img src=' + "'" + filePath + "'" + ' height=50 width=45 /></td>' +
                    //    '<td><a href=' + "'" + filePath + "'" + '  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a></td>' +
                    //    '</tr>')


                    cardbody.append(
                        //'<tr id=' + rowno + '>' +
                        //'<td>' + E.fileName + '</td>' +
                        //'<td>' + E.subject + '</td>' +
                        //'<td><i class="fa fa-file" style="font-size:30px;color:lightgray"> </i></td>' +
                        //'<td><a href=' + "'" + filePath + "'" + '  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a></td>' +
                        //'</tr>')

                        `<div class="card div${rowno} boxDesign" id="btnTotalLead">


                                     <p class="card-text" style="margin-bottom: 1%; text-align: center !important;"><strong>File Name:</strong>${E.fileName}</p>

                                  <p class="card-text" style="margin-bottom: 1%; text-align: center !important;"> <strong>Subject:</strong>${E.subject}</p>


                                <div class="card-body" style="height:110px;">
                                       <div class="cardimg">
                                        <img class="card-img-top" src="${filePath}" alt="Card image">
                                      </div>


                                      </div>
                                        <div class="card-footer text-center font-weight-bold" style:"margin-top: -7%;">


                                    <a href="${filePath}"  target="_blank"  title="Preview"  class="btn btn-info btn-sm"><i class="fa fa-eye"></i></a>

                                  </div>

                             </div>`
                    )
                }
            }
            index = index + 1;
        });
    }

    function CSApproveProcess() {
        if ($("#approveType").val() == '') {
            swal("Attention!!", "Please select type.", "warning");
            return false;
        }
        else if ($("#approveType").val() == '4' || $("#approveType").val() == '-1') {
            if ($("#appRemark").val().trim() == '') {
                swal("Attention!!", "Please enter remark.", "warning");
                return false;
            }
        }

        var CSID = parseInt(@Model.cSMaster?.Id)?parseInt(@Model.cSMaster?.Id):0;
        var csNo='@Model.cSMaster?.csNo';
        var reqID=@Model.cSMaster?.requisitionId;
        var reqNo='@Model.cSMaster?.requisition?.reqNo';
        var Remark = $("#appRemark").val().trim();
        var txtAppType="";
        var conAppType="";
        var AppType = 0;

        if ($("#approveType").val() == "4")
        {
            AppType = 4; //return
            txtAppType="Do you want to return this record!";
            conAppType="Yes, return it!";
        }
        else if ($("#approveType").val() == "-1") {
            AppType = -1; // reject
            txtAppType="Do you want to reject this record!";
            conAppType="Yes, reject it!";
        }
        else
        {
            AppType = 1; //approve
            txtAppType="Do you want to approve this record!";
            conAppType="Yes, approve it!";
        }
        swal({title: 'Are you sure?',text: txtAppType,type: 'warning',showCancelButton: true,confirmButtonColor: '#3085d6',cancelButtonColor: '#d33',confirmButtonText: conAppType
        }).then(function () {
            //$('#btnApprove').prop('disabled', true);
            $.ajax({
                url: '@Url.Action("SaveCSApprove", "PurchaseApprove", "http")',
                type: 'POST',
                data: { csID: CSID, Remark: Remark, AppType: AppType, csNo:csNo, reqID:parseInt(reqID), reqNo:reqNo}

            })
                .done(function () {
                    if(AppType==-1){
                        swal('Rejected!','Your CS has been rejected.','success').then(function(){
                            window.location = '@Url.Action("Index", "PurchaseApprove")';
                        })
                    }
                    else if(AppType==4){
                        swal('Returned!','Your CS has been returned.','success').then(function(){
                            window.location = '@Url.Action("Index", "PurchaseApprove")';
                        })
                    }
                    else{
                        swal('Approved!','Your CS has been approved.','success').then(function(){
                            window.location = '@Url.Action("Index", "PurchaseApprove")';
                        })
                    }
                    //$('#btnApprove').prop('disabled', false);
                })
                .fail(function () {
                    //$('#btnApprove').prop('disabled', false);
                    swal('Attention!', 'Unable to Approved. Please Try Again.', 'warning');

                });

        })

    }

    function EditItem(Id) {
        var reqDetailID = Id.substring(5);
        Common.Ajax('GET', '/SCMPurchaseProcess/PurchaseApprove/GetSupplierWiseItemDetails/?reqDetailID=' + reqDetailID, [], 'json', ajaxGetSupplierWiseItemDetails);
        $('#itemDetailsEdit').modal('show');
    }
    function ajaxGetSupplierWiseItemDetails(response) {
        console.log(response);
        $("#tblitemDetails tbody>tr").empty();
        var index = "0";
        var ItemTotal = 0;

        $.each(response, function (key, value) {
            index = $("#tblitemDetails tbody>tr").length;
            $('#itemCode').val(value.ItemCode);
            $('#itemName').val(value.ItemName);

            var TotalAppx = parseInt(value.subTotal);
            ItemTotal = TotalAppx + ItemTotal;
            $("#total").val(ItemTotal);
            var dtTable = $("#tblitemDetails");
            var tableBody = dtTable.find('tbody');
            tableBody.append(
                '<tr id=' + index + '>' +
                '<td>' + value.supplierName + '<input type="text" id="txtBusnissName' + index + '" class ="clsBusnissName" style="display:none" value="' + value.supplierName + '"/><input type="text" id="txtSuppID' + index + '" class ="clsSuppID" style="display:none" value="' + value.supplierId + '"/></td>' +
                '<td><input type="text" id="txtQTY' + index + '" onkeyup="fnMultiQtyRate(this)" style="text-align:right;padding-right:6px;" class ="clsQTY" name="csEqty"  value="' + value.qty + '"/><input type="text" id="txtID' + index + '" class ="clsID" style="display:none" name="csEId" value="' + value.Id + '"/></td>' +
                '<td><input type="text" id="txtRat' + index + '" onkeyup="fnMultiQtyRate(this)" style="text-align:right;padding-right:6px;" class ="clsRate" name="csErate" value="' + value.rate + '"/></td>' +
                '<td><input type="text" id="txtSubTotal' + index + '" style="text-align:right;padding-right:6px;" class ="clsSubTotal" readonly="readonly" value="' + value.subTotal + '"/></td>' +
                '</tr>')


        })

        index = index + 1;

    }
    function fnMultiQtyRate(arg) {
        var txtId = arg.getAttribute('id');
        var txtrow = txtId.substring(6);

        var Qty = $("#txtQTY" + txtrow).val();

        var Rate = $("#txtRat" + txtrow).val();

        var subTotal = parseFloat(Qty) * parseFloat(Rate);

        $("#txtSubTotal" + txtrow).val(subTotal);

        var SubT = 0;
        Index = $('#tblitemDetails tbody tr').length;
        for (var i = 0; i < Index; i++) {
            SubT = parseFloat(SubT) + parseFloat($("#txtSubTotal" + i).val());
            $("#total").val(SubT);
        }
    }


        </script>
    }

    <style>
        /*For Justify Style*/

        .justify {
            display: none;
        }

        #divJustification input[type=checkbox] + label {
            display: inline-block;
            background-color: #fe48a6;
            color: white;
            font-family: sans-serif;
            font-size: 12px;
            font-weight: bold;
            height: 30px;
            line-height: 30px;
            position: relative;
            text-transform: uppercase;
            width: 80px;
        }

            #divJustification input[type=checkbox] + label,
            #divJustification input[type=checkbox] + label i {
                -webkit-transition: all 200ms ease;
                -moz-transition: all 200ms ease;
                -o-transition: all 200ms ease;
                transition: all 200ms ease;
            }

        #divJustification input[type=checkbox]:checked + label {
            background-color: #67B04F;
        }

        #divJustification input[type=checkbox] + label:before,
        #divJustification input[type=checkbox] + label:after,
        #divJustification input[type=checkbox] + label i {
            width: 50%;
            display: inline-block;
            height: 100%;
            text-align: center;
        }

        #divJustification input[type=checkbox] + label:before {
            content: attr(data-text-true);
        }

        #divJustification input[type=checkbox] + label:after {
            content: attr(data-text-false);
        }

        #divJustification input[type=checkbox] + label i {
            top: 10%;
            background-color: white;
            height: 80%;
            left: 5%;
            position: absolute;
            width: 45%;
        }

        #divJustification input[type=checkbox]:checked + label i {
            left: 50%;
        }

        /*End Justify*/
    </style>

