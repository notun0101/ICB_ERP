@model OPUSERP.Areas.HRPMSACR.Models.ACRAssessmentVM
@{
    ViewBag.Title = "Authority";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div id="tabs" class="project-tab col-sm-12">
        <div class="row">
            <nav style="padding-left:100px;font-weight:bold;font-size:20px;">
                <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                    @*<a class="nav-link active" id="nav-4thPart-tab" data-toggle="tab" href="#nav-4thPart" role="tab" aria-controls="nav-4thPart" aria-selected="true">প্রতিবেদনাধীন</a>*@
                    <a class="nav-link" id="nav-1stPart-tab" data-toggle="tab" href="#nav-1stPart" role="tab" aria-controls="nav-1stPart" aria-selected="true">প্রতিবেদনকারী</a>
                    <a class="nav-link" id="nav-2ndPart-tab" data-toggle="tab" href="#nav-2ndPart" role="tab" aria-controls="nav-2ndPart" aria-selected="false">প্রতিস্বাক্ষরকারী</a>
                    <a class="nav-link" id="nav-4thPart-tab" data-toggle="tab" href="#nav-4thPart" role="tab" aria-controls="nav-4thPart" aria-selected="false">চূড়ান্ত প্রতিস্বাক্ষরকারী</a>
                    <a class="nav-link" id="nav-3rdPart-tab" data-toggle="tab" href="#nav-3rdPart" role="tab" aria-controls="nav-3rdPart" aria-selected="false">সম্পন্ন তালিকা</a>
                </div>
            </nav>
        </div>
        <div class="row" style="height:10px;"></div>
        <div class="tab-content" id="nav-tabContent">

            <div class="tab-pane show fade active" id="nav-1stPart" role="tabpanel" aria-labelledby="nav-1stPart-tab">
                <form id="frmACRRecomFinal">
                    <div class="row col-sm-12">
                        <div class="card" style="width: 100%;">

                            <div class="card-body">

                                <div class="row">
                                    <div class="col-2">

                                    </div>
                                    <div class="col-7" style="margin-left:8%">
                                        <h5 class="card-title" style="color: black">প্রতিবেদনাধীন কর্মকর্তা/কর্মচারীদের তালিকা(প্রতিবেদনকারী)</h5>
                                    </div>
                                    <div class="col-3">

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-3">
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">ACR for Year</label>
                                            <div class="col-md-6">
                                                <select id="acrYearForRecom" class="form-control">
                                                    <option value="" >--Select ACR Year--</option>
                                                    @*<option value="2019">2019</option>*@
                                                    @*<option value="2021">2021</option>*@
                                                    <option value="2022">2022</option>
                                                    <option selected="selected" value="2023">2023</option>
                                                </select>
                                            </div>
                                            <input type="button" id="btnLoad" class="btn-sm btn btn-info" value="Load" />
                                        </div>
                                    </div>
                                    <div class="col-3"></div>
                                </div>

                                <div class="container">

                                    <div class="row">
                                        <table class="table table-striped" id="tblAssessment_Recom" style="width:100%">
                                            <thead>
                                                <tr>
                                                    @*<th>সব নির্বাচন <br /><input type="checkbox" id="chAll" style="width:20px;height:20px;padding-left:0px;padding-right:0px;" /></th>*@
                                                    <th>পরিচিতি (আই ডি) নং</th>
                                                    <th>নাম</th>
                                                    <th>বৎসর</th>
                                                    <th>তারিখ থেকে</th>
                                                    <th>তারিখ পর্যন্ত</th>
                                                    <th>প্রতিবেদনকারী</th>
                                                    <th>প্রতিস্বাক্ষরকারী</th>
                                                    <th>চূড়ান্ত প্রতিস্বাক্ষরকারী</th>
                                                    <th>স্ট্যাটাস</th>
                                                    <th>প্রক্রিয়া <i style="color:white">Ac</i></th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            @*<tbody>
                                            @{
                                                foreach (var data in Model.lstRecom)
                                                {
                                            <tr>
                                                <td>
                                                    @if (data.statusInfoId != 2)
                                                            {
                                                    <input type="checkbox" id="ch-@data.assessmentId" disabled="disabled" name="chAssessment" class="clsCheckBox" style="width:20px;height:20px;">
                                                            }
                                                            else
                                                            {
                                                    <input type="checkbox" id="ch-@data.assessmentId" onclick="fnAddVal(@data.assessmentId,this)" name="chAssessment" class="clsCheckBox" style="width:20px;height:20px;">
                                                            }

                                                    <input type="hidden" name="assessId" value="0" id="txt-@data.assessmentId" />
                                                </td>
                                                <td>@data.empCode</td>
                                                <td>@data.empName</td>
                                                <td>@data.assessmentYear</td>
                                                <td>@data.fromDate.Value.ToString("yyyy-MM-dd")</td>
                                                <td>@data.toDate.Value.ToString("yyyy-MM-dd")</td>
                                                <td>@data.recommendatorName</td>
                                                <td>@data.signatoryName</td>

                                                @if (data.statusInfoId == 2)
                                                        {
                                                <td> সম্পন্ন</td>
                                                        }
                                                        else
                                                        {
                                                <td>অসম্পন্ন</td>
                                                        }

                                                <td>
                                                    @if (data.empType == "Top")
                                                            {
                                                    <a href="@Url.Action("Index","ExecutiveOfficer",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                            }
                                                            else if (data.empType == "Officer")
                                                            {
                                                    <a href="@Url.Action("Index","Officer",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                            }
                                                            else if (data.empType == "Clerk")
                                                            {
                                                    <a href="@Url.Action("Index","Clerical",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                            }
                                                            else if (data.empType == "NonClerk")
                                                            {
                                                    <a href="@Url.Action("Index","NonClerical",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                            }

                                                </td>
                                            </tr>
                                                }
                                            }

                                        </tbody>*@
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-12 row" hidden="hidden">
                        <div class="col-sm-9"></div>
                        <div class="col-sm-3">
                            <button title="Save" class="btn btn-success" id="btnSaveRF" style="width:80px;">Submit</button>
                        </div>
                    </div>
                </form>


            </div>

            <div class="tab-pane fade" id="nav-2ndPart" role="tabpanel" aria-labelledby="nav-2ndPart-tab">
                <form id="frmACRSignFinal">
                    <div class="row col-sm-12">
                        <div class="card" style="width: 100%;">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-2">

                                    </div>
                                    <div class="col-7" style="margin-left:8%">
                                        <h5 class="card-title" style="color: black">প্রতিবেদনাধীন কর্মকর্তা/কর্মচারীদের তালিকা(প্রতিস্বাক্ষরকারী)</h5>
                                    </div>
                                    <div class="col-3">

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-3">
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">ACR for Year</label>
                                            <div class="col-md-6">
                                                <select id="acrYearForSign" class="form-control">
                                                    <option value="" selected="selected">--Select ACR Year--</option>
                                                    @*<option value="2019">2019</option>*@
                                                    <option value="2021">2021</option>
                                                    <option value="2022">2022</option>
                                                    <option value="2023">2023</option>
                                                </select>
                                            </div>
                                            <input type="button" id="btnLoadForSignatory" class="btn-sm btn btn-info" value="Load" />
                                        </div>
                                    </div>
                                    <div class="col-3"></div>
                                </div>

                                <div class="container">

                                    <div class="card">
                                        <div class="row">
                                            <div class="col-12">
                                                @*<input type="hidden" id="EmpCode" name="EmpCode" />*@
                                                <div>
                                                    <table class="table table-striped" id="tblAssessment_Sign">
                                                        <thead>
                                                            <tr>
                                                                @*<th>সব নির্বাচন <br /><input type="checkbox" id="chSignAll" style="width:20px;height:20px;padding-left:0px;padding-right:0px;" /></th>*@
                                                                <th>পরিচিতি (আই ডি) নং</th>
                                                                <th>নাম</th>
                                                                <th>বৎসর</th>
                                                                <th>তারিখ থেকে</th>
                                                                <th>তারিখ পর্যন্ত</th>
                                                                <th>প্রতিবেদনকারী</th>
                                                                <th>প্রতিস্বাক্ষরকারী</th>
                                                                <th>চূড়ান্ত প্রতিস্বাক্ষরকারী</th>
                                                                <th>স্ট্যাটাস</th>
                                                                <th>প্রক্রিয়া <i style="color:white"></i></th>
                                                            </tr>
                                                        </thead>
                                                        @*<tbody>
                                                        @{
                                                            foreach (var data in Model.lstSign)
                                                            {
                                                        <tr>
                                                            <td>
                                                                @if (data.statusInfoId != 3)
                                                                       {
                                                                <input type="checkbox" id="ch-@data.assessmentId" disabled="disabled" name="chAssessment" class="clsSignCheckBox" style="width:20px;height:20px;">
                                                                       }
                                                                       else
                                                                       {
                                                                <input type="checkbox" id="ch-@data.assessmentId" onclick="fnAddVal(@data.assessmentId,this)" name="chAssessment" class="clsSignCheckBox" style="width:20px;height:20px;">
                                                                       }

                                                                <input type="hidden" name="assessId" value="0" id="txt-@data.assessmentId" />
                                                            </td>
                                                            <td>@data.empCode</td>
                                                            <td>@data.empName</td>
                                                            <td>@data.assessmentYear</td>
                                                            <td>@data.fromDate.Value.ToString("yyyy-MM-dd")</td>
                                                            <td>@data.toDate.Value.ToString("yyyy-MM-dd")</td>
                                                            <td>@data.recommendatorName</td>
                                                            <td>@data.signatoryName</td>
                                                            @if (data.statusInfoId == 3)
                                                                    {
                                                            <td> সম্পন্ন</td>
                                                                    }
                                                                    else
                                                                    {
                                                            <td>অসম্পন্ন</td>
                                                                    }
                                                            <td>

                                                                @if (data.empType == "Top")
                                                                        {
                                                                <a href="@Url.Action("Index","ExecutiveOfficer",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }
                                                                        else if (data.empType == "Officer")
                                                                        {
                                                                <a href="@Url.Action("Index","Officer",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }
                                                                        else if (data.empType == "Clerk")
                                                                        {
                                                                <a href="@Url.Action("Index","Clerical",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }
                                                                        else if (data.empType == "NonClerk")
                                                                        {
                                                                <a href="@Url.Action("Index","NonClerical",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }

                                                            </td>
                                                        </tr>
                                                            }
                                                        }

                                                    </tbody>*@
                                                    </table>
                                                </div>
                                            </div>
                                        </div>


                                    </div>

                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="col-md-12 row" hidden="hidden">
                        <div class="col-sm-9"></div>
                        <div class="col-sm-3">
                            <button title="Save" class="btn btn-success" id="btnSaveSF" style="width:80px;">Submit</button>
                        </div>
                    </div>
                </form>


            </div>

            <div class="tab-pane fade" id="nav-4thPart" role="tabpanel" aria-labelledby="nav-4thPart-tab">
                <form id="frmACRSignFinal">
                    <div class="row col-sm-12">
                        <div class="card" style="width: 100%;">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-2">

                                    </div>
                                    <div class="col-7" style="margin-left:8%">
                                        <h5 class="card-title" style="color: black">প্রতিবেদনাধীন কর্মকর্তা/কর্মচারীদের তালিকা(চূড়ান্ত প্রতিস্বাক্ষরকারী)</h5>
                                    </div>
                                    <div class="col-3">

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-3">
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">ACR for Year</label>
                                            <div class="col-md-6">
                                                <select id="acrYearForFSign" class="form-control">
                                                    <option value="" selected="selected">--Select ACR Year--</option>
                                                    @*<option value="2019">2019</option>*@
                                                    <option value="2021">2021</option>
                                                    <option value="2022">2022</option>
                                                    <option value="2023">2023</option>
                                                </select>
                                            </div>
                                            <input type="button" id="btnLoadForFinalSignatory" class="btn-sm btn btn-info" value="Load" />
                                        </div>
                                    </div>
                                    <div class="col-3"></div>
                                </div>

                                <div class="container">

                                    <div class="card">
                                        <div class="row">
                                            <div class="col-12">
                                                @*<input type="hidden" id="EmpCode" name="EmpCode" />*@
                                                <div>
                                                    <table class="table table-striped" id="tblAssessment_FSign">
                                                        <thead>
                                                            <tr>
                                                                @*<th>সব নির্বাচন <br /><input type="checkbox" id="chSignAll" style="width:20px;height:20px;padding-left:0px;padding-right:0px;" /></th>*@
                                                                <th>পরিচিতি (আই ডি) নং</th>
                                                                <th>নাম</th>
                                                                <th>বৎসর</th>
                                                                <th>তারিখ থেকে</th>
                                                                <th>তারিখ পর্যন্ত</th>
                                                                <th>প্রতিবেদনকারী</th>
                                                                <th>প্রতিস্বাক্ষরকারী</th>
                                                                <th>চূড়ান্ত প্রতিস্বাক্ষরকারী</th>
                                                                <th>স্ট্যাটাস</th>
                                                                <th>প্রক্রিয়া <i style="color:white"></i></th>
                                                            </tr>
                                                        </thead>
                                                        @*<tbody>
                                                        @{
                                                            foreach (var data in Model.lstSign)
                                                            {
                                                        <tr>
                                                            <td>
                                                                @if (data.statusInfoId != 3)
                                                                       {
                                                                <input type="checkbox" id="ch-@data.assessmentId" disabled="disabled" name="chAssessment" class="clsSignCheckBox" style="width:20px;height:20px;">
                                                                       }
                                                                       else
                                                                       {
                                                                <input type="checkbox" id="ch-@data.assessmentId" onclick="fnAddVal(@data.assessmentId,this)" name="chAssessment" class="clsSignCheckBox" style="width:20px;height:20px;">
                                                                       }

                                                                <input type="hidden" name="assessId" value="0" id="txt-@data.assessmentId" />
                                                            </td>
                                                            <td>@data.empCode</td>
                                                            <td>@data.empName</td>
                                                            <td>@data.assessmentYear</td>
                                                            <td>@data.fromDate.Value.ToString("yyyy-MM-dd")</td>
                                                            <td>@data.toDate.Value.ToString("yyyy-MM-dd")</td>
                                                            <td>@data.recommendatorName</td>
                                                            <td>@data.signatoryName</td>
                                                            @if (data.statusInfoId == 3)
                                                                    {
                                                            <td> সম্পন্ন</td>
                                                                    }
                                                                    else
                                                                    {
                                                            <td>অসম্পন্ন</td>
                                                                    }
                                                            <td>

                                                                @if (data.empType == "Top")
                                                                        {
                                                                <a href="@Url.Action("Index","ExecutiveOfficer",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }
                                                                        else if (data.empType == "Officer")
                                                                        {
                                                                <a href="@Url.Action("Index","Officer",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }
                                                                        else if (data.empType == "Clerk")
                                                                        {
                                                                <a href="@Url.Action("Index","Clerical",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }
                                                                        else if (data.empType == "NonClerk")
                                                                        {
                                                                <a href="@Url.Action("Index","NonClerical",new { id=data.assessmentId,empCode=@data.empCode})" class="btn btn-info btn-xs" title="Details"><i class="fa fa-eye"></i></a>
                                                                        }

                                                            </td>
                                                        </tr>
                                                            }
                                                        }

                                                    </tbody>*@
                                                    </table>
                                                </div>
                                            </div>
                                        </div>


                                    </div>

                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="col-md-12 row" hidden="hidden">
                        <div class="col-sm-9"></div>
                        <div class="col-sm-3">
                            <button title="Save" class="btn btn-success" id="btnSaveSF" style="width:80px;">Submit</button>
                        </div>
                    </div>
                </form>


            </div>

            <div class="tab-pane fade" id="nav-3rdPart" role="tabpanel" aria-labelledby="nav-3rdPart-tab">

                <div class="row col-sm-12">
                    <div class="card" style="width: 100%;">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-2">

                                </div>
                                <div class="col-7" style="margin-left:8%">
                                    <h5 class="card-title" style="color: black">প্রতিবেদনাধীন কর্মকর্তা/কর্মচারীদের সম্পন্ন তালিকা</h5>
                                </div>
                                <div class="col-3">

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-3">
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-md-4 control-label">ACR for Year</label>
                                        <div class="col-md-6">
                                            <select id="acrYearFinal" class="form-control">
                                                <option value="" selected="selected">--Select ACR Year--</option>
                                                @*<option value="2019">2019</option>*@
                                                <option value="2021">2021</option>
                                                <option value="2022">2022</option>
                                                <option value="2023">2023</option>
                                            </select>
                                        </div>
                                        <input type="button" id="btnLoadFinal" class="btn-sm btn btn-info" value="Load" />
                                    </div>
                                </div>
                                <div class="col-3"></div>
                            </div>

                            <div class="container">

                                <div class="card">
                                    <div class="row">
                                        <div class="col-12">
                                            @*<input type="hidden" id="EmpCode" name="EmpCode" />*@
                                            <div>
                                                <table class="table table-striped" id="tblAssessment">
                                                    <thead>
                                                        <tr>
                                                            <th>পরিচিতি (আই ডি) নং</th>
                                                            <th>নাম</th>
                                                            <th>বৎসর</th>
                                                            <th>তারিখ থেকে</th>
                                                            <th>তারিখ পর্যন্ত</th>
                                                            <th>প্রতিবেদনকারী</th>
                                                            <th>প্রতিস্বাক্ষরকারী</th>
                                                            @*<th>প্রক্রিয়া <i style="color:white">Ac</i></th>*@
                                                        </tr>
                                                    </thead>
                                                    @*<tbody>
                                                    @{
                                                            foreach (var data in Model.lstFinal)
                                                            {
                                                    <tr>

                                                        <td>@data.empCode</td>
                                                        <td>@data.empName</td>
                                                        <td>@data.assessmentYear</td>
                                                        <td>@data.fromDate.Value.ToString("yyyy-MM-dd")</td>
                                                        <td>@data.toDate.Value.ToString("yyyy-MM-dd")</td>
                                                        <td>@data.recommendatorName</td>
                                                        <td>@data.signatoryName</td>

                                                        @*<td>


                                                            @if (data.empType == "Top")
                                                                        {
                                                                <button onclick="getPrint(@data.assessmentId,1)" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>
                                                                        }
                                                                        else if (data.empType == "Officer")
                                                                        {
                                                                <button onclick="getPrint(@data.assessmentId,2)" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>
                                                                        }
                                                                        else if (data.empType == "Clerk")
                                                                        {
                                                                <button onclick="getPrint(@data.assessmentId,3)" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>
                                                                        }
                                                                        else if (data.empType == "NonClerk")
                                                                        {
                                                                <button onclick="getPrint(@data.assessmentId,4)" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>
                                                                        }

                                                        </td>
                                                    </tr>
                                                            }
                                                    }

                                                </tbody>*@
                                                </table>
                                            </div>
                                        </div>
                                    </div>


                                </div>

                            </div>
                        </div>
                    </div>


                </div>

            </div>

            <div class="tab-pane fade hide active" id="nav-4thPart" role="tabpanel" aria-labelledby="nav-4thPart-tab">

                <div class="row col-sm-12">
                    <div class="card" style="width: 100%;">

                        <h5 style="color:black;text-align:center;">Update User Profile</h5>

                        <div class="card-body">

                            <div class="container">
                                <div class="row">
                                    <div class="col-2">
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">ACR for Year</label>
                                            <div class="col-md-6">
                                                <input type="hidden" id="acr_year" name="acrYear" value="" />
                                                <select id="acrYear" class="form-control">
                                                    <option value="" selected="selected">--Select ACR Year--</option>
                                                    @*<option value="2019">2019</option>*@
                                                    <option value="2021">2021</option>
                                                    <option value="2022">2022</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">ACR Type</label>
                                            <div class="col-md-6">
                                                <select id="acrType" name="acrType" class="form-control">
                                                    <option value="" selected="selected">--Select ACR Type--</option>
                                                    <option value="Quaterly">Quaterly</option>
                                                    @*<option value="HalfYearly">Half-Yearly</option>*@
                                                    <option value="Yearly">Yearly</option>
                                                    <option value="Special">Special</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-2">
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">From Date</label>
                                            <div class="col-md-6">
                                                <input type="text" id="acrfromDate" name="" class="form-control datePicker" autocomplete="off" readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">To Date</label>
                                            <div class="col-md-6">
                                                <input type="text" id="acrtoDate" name="" class="form-control datePicker" autocomplete="off"   readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Personnel No</label>
                                            <div class="col-md-8">
                                                <input type="text" name="empCode" id="empCode" class="form-control" readonly />
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Designation</label>
                                            <div class="col-md-8">
                                                <input type="text" name="designation" id="designation" class="form-control" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">User Name</label>
                                            <div class="col-md-8">
                                                <input type="text" name="userName" id="userName" class="form-control" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Job Duration</label>
                                            <div class="col-md-8">
                                                <input type="text" name="JobDuration" id="JobDuration" class="form-control" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Job Duration as Branch Manager</label>

                                            <div class="col-md-8">
                                                <input type="text" name="JobDurationAsBranchManger" id="JobDurationAsBranchManger" class="form-control" />
                                                <span> (If no data then type N/A)</span>
                                            </div>
                                        </div>
                                        <input type="hidden" id="hiddenimage" />
                                        @*<div class="form-group row">
                                        <label class="col-md-4 control-label">Photo <span style="color:red;">*</span></label>
                                        <div class="col-md-8">
                                            <img id="user_img" height="150" width="140" class="img-circle" /><br />
                                            <input type="hidden" id="hiddenimage" />
                                            <input type="file" title="search image" id="imagePath" name="imagePath" class="btn btn-default btn-sm pull-right" />
                                            <label for="imagePath" class="custom-file-upload">
                                                Choose Photo
                                            </label>
                                        </div>
                                    </div>*@
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Employee Name</label>
                                            <div class="col-md-8">
                                                <input type="text" name="empName" id="empName" class="form-control" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Posting Place</label>
                                            <div class="col-md-8">
                                                <input type="text" name="branchName" id="branchName" class="form-control" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Division Name</label>
                                            <div class="col-md-8">
                                                <input type="text" name="userType" id="userType" class="form-control" readonly />
                                            </div>
                                        </div>

                                        @{
                                            var totaldaysInBranch = Model.empPostings?.Sum(x => x.totalDaysInBranch);
                                            int year = Convert.ToInt32(totaldaysInBranch) / 365;
                                            int month = (Convert.ToInt32(totaldaysInBranch) - (year * 365)) / 30;
                                        }
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Job Duration in Branch</label>
                                            <div class="col-md-8">
                                                @*<input type="text" name="JobDurationAsOthers" id="JobDurationAsOthers" value="@year years @month months" class="form-control" />*@
                                                <input type="text" name="JobDurationAsOthers" id="DurationBranch" value="@year years @month months" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label">Job Duration as Zonal Head <span style="color:red;">*</span></label>
                                            <div class="col-md-8">
                                                <input type="text" name="JobDurationAsZonalHead" id="JobDurationAsZonalHead" class="form-control" />
                                                <span> (If no data then type N/A)</span>
                                            </div>
                                        </div>
                                        <input type="hidden" id="hiddensignature" />
                                        @*<div class="form-group row">
                                        <label class="col-md-4 control-label">Signature <span style="color:red;">*</span></label>
                                        <div class="col-md-8">
                                            <img id="user_signature" height="80" width="300" class="img-circle" />
                                            <input type="hidden" id="hiddensignature" />
                                            <label for="signaturePath" class="custom-file-upload">
                                                Choose Signature
                                            </label>
                                            <input type="file" title="search signature" id="signaturePath" name="signaturePath" class="btn btn-default btn-sm pull-right" />
                                        </div>
                                    </div>*@
                                        <br />
                                        <div class="form-group row">
                                            <label class="col-md-4 control-label"></label>
                                            <div class="col-md-8">
                                                <input type="button" value="Save" id="btn2ndSave" class="btn btn-success btn-sm" style="width:80px;" />
                                                &nbsp;
                                                <input type="button" value="Next" id="btnNext" class="btn btn-success btn-sm" style="width:80px;" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts {

    <script type="text/javascript">

        @*function getPrint(assesId, reporttype) {
            if (reporttype == 1) {
                window.open('@Url.Action("AcrReportExcecutivePdf", "HtmlReport")?assesmentId=' + assesId + '', '_blank');
            }
            else if (reporttype == 2) {
                window.open('@Url.Action("AcrReportOfficerPdf", "HtmlReport")?assesmentId=' + assesId + '', '_blank');
            }
            else if (reporttype == 3) {
                window.open('@Url.Action("AcrReportClericalPdf", "HtmlReport")?assesmentId=' + assesId + '', '_blank');
            }
            else {
                window.open('@Url.Action("AcrReportNonClericalPdf", "HtmlReport")?assesmentId=' + assesId + '', '_blank');
            }
        }*@
        @*function Load() {
            var empcode = $('#acrYearForRecom').val();

            $.ajax({
                url: '@Url.Action("GetAssessmentInfo", "AssessmentInfo")',
                data: { year: empcode },
                type: 'GET',
                success: function (records) {

                },
                error: function () {
                    alert("Fail to load");

                }
            });*@


        $(document).ready(function () {
            $('#btnNext').hide();
            $('#acrfromDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });
            $('#acrtoDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });

            var year = $("#acrYear").val();
            //Common.Ajax('GET', '/AssessmentInfo/GetAssessmentInfo/?year=' + year, [], 'json', ajaxGetAssessmentInfoByYear);

            //$("#btnLoad").click(function () {
            //    GetAssessmentInfoByYear();
            //});

            $("#acrYear").change(function () {
                if ($("#acrYear").val() == "2019") {
                    Common.Ajax('GET', '@Url.Action("GetUsersProfile2019", "AssessmentInfo")', [], 'json', GetUsersProfile, false);
                }
                else if ($("#acrYear").val() != "2019") {
                    Common.Ajax('GET', '@Url.Action("GetUsersProfile", "AssessmentInfo")', [], 'json', GetUsersProfile, false);
                }
                $("#acr_year").val($("#acrYear").val());
                //if ($("#acrYear").val() != "") {
                //    var year = $("#acrYear").val();
                //    table.ajax.url("/AssessmentInfo/GetAssessmentInfo/" + year).load();
                //}
            });
			Common.Ajax('GET', '@Url.Action("GetUsersProfile", "AssessmentInfo")', [], 'json', GetUsersProfile, false);
            //$("#acrYearForRecom").change(function () {
            //    GetAssessmentInfoByYear();
            //});


            $("#acrType").change(function () {
                if ($("#acrType").val() == "Yearly") {
                   var years= $("#acrYear").val();
                    $('#acrfromDate').val("01-Jan-" + years);
                    $('#acrtoDate').val("31-Dec-" + years);

                }
                else {
                    $('#acrfromDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });
                    $('#acrtoDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });

                }
            });

            $("#acrYear").change(function () {
                if ($("#acrType").val() == "Yearly") {
                   var years= $("#acrYear").val();
                    $('#acrfromDate').val("01-Jan-" + years);
                    $('#acrtoDate').val("31-Dec-" + years);

                }
                else {
                    $('#acrfromDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });
                    $('#acrtoDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });

                }
            });







            $("#btnLoad").click(function () {
                let year = $('#acrYearForRecom').val();
                if (year == '') {
                    swal("Please Select ACR Year");
                    return false;
                }
                else {
                    GetAssessmentInfoByYear(year);
                }

                @*if ('@Model.ACRUsers.EmpCode' == '@Model.AssessmentBasic.recommendator') {
                    GetAssessmentInfoByYear(year);
                } else if ('@Model.ACRUsers.EmpCode' == '@Model.AssessmentBasic.signatory') {
                    GetAssessmentInfoByYear(year);
                }*@

            });

            $("#btnLoadForSignatory").click(function () {
                let yearSign = $('#acrYearForSign').val();
                if (yearSign == '') {
                    swal("Please Select ACR Year");
                    return false;
                }
                else {
                    GetAssessmentInfoByYear_Sign(yearSign);
                }

                @*if ('@Model.ACRUsers.EmpCode' == '@Model.AssessmentBasic.recommendator') {
                    GetAssessmentInfoByYear(year);
                } else if ('@Model.ACRUsers.EmpCode' == '@Model.AssessmentBasic.signatory') {
                    GetAssessmentInfoByYear(year);
                }*@

            });
            $("#btnLoadForFinalSignatory").click(function () {
                let yearFSign = $('#acrYearForFSign').val();
                if (yearFSign == '') {
                    swal("Please Select ACR Year");
                    return false;
                }
                else {
                    GetAssessmentInfoByYear_FSign(yearFSign);
                }
            });
            $("#btnLoadFinal").click(function () {
                let yearFinal = $('#acrYearFinal').val();
                if (yearFinal == '') {
                    swal("Please Select ACR Year");
                    return false;
                }
                else {
                    GetAssessmentInfoByYear_Final(yearFinal);
                }

                });


            var statusId = parseInt('@Model.AssessmentBasic?.statusInfoId') ? parseInt('@Model.AssessmentBasic?.statusInfoId') : 0;

            @*if ('@Model.ACRUsers.EmpCode' == '@Model.AssessmentBasic.empCode') {*@
            @*if ('@Model.ACRUsers.EmpCode' != null) {
                if (statusId > 1) {
                    $('#btn2ndSave').prop('disabled', true);
                    $('#btnNext').prop('disabled', false);
                }
                else if (statusId == null) {
                    $('#btn2ndSave').prop('disabled', false);
                    $('#btnNext').prop('disabled', true);
                }
                else {
                    $('#btn2ndSave').prop('disabled', false);
                    $('#btnNext').prop('disabled', true);
                }
            }*@

             if ('@Model.ACRUsers.EmpCode' != null) {
                if (statusId > 1) {
                    $('#btn2ndSave').hide();
                    $('#btnNext').show();
                }
                else if (statusId == null) {
                    $('#btn2ndSave').show();
                    $('#btnNext').hide();
                }
                else {
                    $('#btn2ndSave').show();
                    $('#btnNext').hide();
                }
            }
            //Previous
            @*var statusId = parseInt('@Model.AssessmentBasic.statusInfoId') ? parseInt('@Model.AssessmentBasic.statusInfoId') : 0;

            if ('@Model.ACRUsers.EmpCode' == '@Model.AssessmentBasic.empCode') {
                if (statusId > 1) {
                    $('#btn2ndSave').prop('disabled', true);
                }
                else {
                    $('#btn2ndSave').prop('disabled', false);
                }
            }
            if (statusId == 0) {
                $('#btnNext').hide();
            }
            else {
                $('#btnNext').show();
            }*@

            $("#btnSaveRF").click(function (e) {

                var isChecked = $('.clsCheckBox:checkbox:checked').length;
                if (isChecked == 0) {
                    swal('Attention!', 'কমপক্ষে একজনকে  নির্বাচন  করুন!', 'warning');
                    return false;
                }

                e.preventDefault();
                var form = $("#frmACRRecomFinal");
                swal({
                    title: 'Are you sure?', text: "You want to save this data!", type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, save it!'
                }).then(function () {
                    $.ajax({
                        url: '@Url.Action("UpdateDrawerFinal", "AssessmentInfo")',
                        data: form.serialize(),
                        type: 'POST',
                        success: function (records) {
                            swal('Success!', 'Saved Successfully!', 'success');
                            location.reload();
                        }
                    });
                })
            });

            $("#btnSaveSF").click(function (e) {

                var isChecked = $('.clsSignCheckBox:checkbox:checked').length;
                if (isChecked == 0) {
                    swal('Attention!', 'কমপক্ষে একজনকে  নির্বাচন  করুন!', 'warning');
                    return false;
                }

                e.preventDefault();
                var form = $("#frmACRSignFinal");
                swal({
                    title: 'Are you sure?', text: "You want to save this data!", type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, save it!'
                }).then(function () {
                    $.ajax({
                        url: '@Url.Action("UpdateCounterFinal", "AssessmentInfo")',
                        data: form.serialize(),
                        type: 'POST',
                        success: function (records) {
                            swal('Success!', 'Saved Successfully!', 'success');
                            location.reload();
                        }
                    });
                })
            });

            $(document).on("click", "input[name = 'chAssessment']", function (e) {
                var id = this.getAttribute('id').replace('ch-', '');

                if (this.checked) {
                    $('#txt-' + id).val(id);
                }
                else {
                    $('#txt-' + id).val(0);
                }
            });

            $('#chAll').change(function () {
                if (this.checked) {
                    $(".clsCheckBox").each(function () {
                        if ($(this).prop('disabled') == false) {
                            $(this).prop('checked', true);
                            var chId = $(this).attr('id')
                            var id = chId.split('-')[1];
                            $('#txt-' + id).val(id);
                        }
                    });
                } else {
                    $(".clsCheckBox").each(function () {
                        $(this).attr('checked', false);
                        var chId = $(this).attr('id')
                        var id = chId.split('-')[1];
                        $('#txt-' + id).val(0);
                    });
                }

            });

            $(document).on("click", "input[name = 'clsSignCheckBox']", function (e) {
                var id = this.getAttribute('id').replace('ch-', '');

                if (this.checked) {
                    $('#txt-' + id).val(id);
                }
                else {
                    $('#txt-' + id).val(0);
                }
            });

            $('#chSignAll').change(function () {
                if (this.checked) {
                    $(".clsSignCheckBox").each(function () {
                        if ($(this).prop('disabled') == false) {
                            $(this).prop('checked', true);
                            var chId = $(this).attr('id')
                            var id = chId.split('-')[1];
                            $('#txt-' + id).val(id);
                        }
                    });
                } else {
                    $(".clsSignCheckBox").each(function () {
                        $(this).attr('checked', false);
                        var chId = $(this).attr('id')
                        var id = chId.split('-')[1];
                        $('#txt-' + id).val(0);
                    });
                }

            });


            //User Profile
            //Common.Ajax('GET', '@Url.Action("GetUsersProfile", "Manage")', [], 'json', GetUsersProfile, false);

            $("#signaturePath").change(function () {
                var fileSize = (this.files[0].size);
                var file = this.files[0];
                var fileType = file["type"];
                var validImageTypes = ["image/gif", "image/jpeg", "image/png"];
                if ($.inArray(fileType, validImageTypes) < 0) {
                    swal('Attention!', 'Uploaded signature must be a image type!', 'warning');
                    return false;
                } else if (fileSize > 200000) {
                    swal('Attention!', 'Signature size must be less then or equal 200kb.', 'warning');
                    return false;
                }
                readSignatureURL(this);
                uploadSignatureFile();
            });
            $("#imagePath").change(function () {
                var fileSize = (this.files[0].size);
                var file = this.files[0];
                var fileType = file["type"];
                var validImageTypes = ["image/gif", "image/jpeg", "image/png"];
                if ($.inArray(fileType, validImageTypes) < 0) {
                    swal('Attention!', 'Uploaded photo must be a image type!', 'warning');
                    return false;
                } else if (fileSize > 200000) {
                    swal('Attention!', 'Photo size must be less then or equal 200kb.', 'warning');
                    return false;
                }

                readPictureURL(this);
                uploadPictureFile();
            });

            $("#btn2ndSave").click(function () {
                $("#btn2ndSave").prop("disabled", true);
                var year = $("#acrYear").val();
                if (year == 2019)
                {
                    ProcessAllBranchXml2019();
                }
                else {
                    ProcessAllBranchXml();
                }

            });

            $("#btnNext").click(function () {
                NextUserProfile();
            });

            $('#logo').bind('change', function () {
                var a = (this.files[0].size);
                alert(a);
                if (a > 2000000) {
                    alert('large');
                };
            });


        });

        function GetAssessmentInfoByYear(year) {
            //$("#tblAssessment_Recom").DataTable().destroy();
            $("#tblAssessment_Recom tbody").empty();
            if ( $.fn.DataTable.isDataTable('#tblAssessment_Recom') ) {
               
                $('#tblAssessment_Recom').DataTable().destroy();
            }
            
            $('#tblAssessment_Recom').DataTable({
                ajax: {
                    url: '@Url.Action("GetAssessmentInfo", "AssessmentInfo")',
                    dataSrc: "",
                    data: { year: year }
                },

                columns: [
                    //{
                    //    title: "Action", "width": "6%",
                    //    "render": function (data, type, e, meta) {
                    //        return '<a class="btn btn-info" href="javascript:void(0)" title="Delete" onclick="SelectJob(' + e.Id + ',' + "'" + e.leadName + "'" + ',' + "'" + e.agreementTypeName + "'" + ',' + "'" + e.remarks + "'" + ',' + e.AgreementId + "," + "'" + e.bankName + "'" + ',' + "'" + e.branchName + "'" + ')"><i class="fa fa-plus-square"></i></a>';
                    //    }
                    //},
                    { data: "empCode" },
                    { data: "empName" },
                    { data: "assessmentYear" },
                    { data: "fDate" },
                    { data: "tDate" },
                    { data: "recommendatorName" },
                    { data: "signatoryName" },
                    { data: "FinalSignatoryName" },
                    {
                        "render": function(data,type,e,meta){
                        var status="";
                        if(e.statusInfoId==2){status='সম্পন্ন' }else{status='অসম্পন্ন'}
                        return status;
                        }

                        },
                    {
                        title: "প্রক্রিয়া", width: 10,
                        "render": function (data, type, e, meta) {
                            //alert(e.empType)
                            if (e.empType == "Top") {
                                return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';
                            }
                            else if (e.empType == "Officer") {
                                return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';
                            }
                            else if (e.empType == "Clerk") {
                                return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';
                            }
                            else if (e.empType == "NonClerk") {
                                return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';
                            }
                            console.log(e);
                        }
                    },
                ],
                pageLength: 100
            });
            //$("#tblAssessment_Recom").DataTable();
        }

        function GetAssessmentInfoByYear_Sign(yearSign) {
            $("#tblAssessment_Sign").DataTable().destroy();
            $("#tblAssessment_Sign tbody").empty();

            $('#tblAssessment_Sign').DataTable({
                ajax: {
                    url: '@Url.Action("GetAssessmentInfo_Sign", "AssessmentInfo")',
                    dataSrc: "",
                    data: { year: yearSign }
                },

                columns: [
                    //{
                    //    title: "Action", "width": "6%",
                    //    "render": function (data, type, e, meta) {
                    //        return '<a class="btn btn-info" href="javascript:void(0)" title="Delete" onclick="SelectJob(' + e.Id + ',' + "'" + e.leadName + "'" + ',' + "'" + e.agreementTypeName + "'" + ',' + "'" + e.remarks + "'" + ',' + e.AgreementId + "," + "'" + e.bankName + "'" + ',' + "'" + e.branchName + "'" + ')"><i class="fa fa-plus-square"></i></a>';
                    //    }
                    //},
                    { data: "empCode" },
                    { data: "empName" },
                    { data: "assessmentYear" },
                    { data: "fDate" },
                    { data: "tDate" },
                    { data: "recommendatorName" },
                    { data: "signatoryName" },
                    { data: "FinalSignatoryName" },
                    {
                        "render": function(data,type,e,meta){
                        var status="";
                        if(e.statusInfoId==7){status='সম্পন্ন' }else{status='অসম্পন্ন'}
                        return status;
                        }

                        },
                    {
                        title: "প্রক্রিয়া", width: 10,
                        "render": function (data, type, e, meta) {
                            if (e.empType == "Top") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';
                                }
                                else {
                                    return '<button style="display:none" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';

                                }
                            }

                            else if (e.empType == "Officer") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';
                                }
                                else {
                                    return '<button style="display:none" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';

                                }
                            }
                            else if (e.empType == "Clerk") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';
                                }
                                else {
                                    return '<button style="display:none" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';

                                }
                            }
                            else if (e.empType == "NonClerk") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';
                                }
                                else {
                                    return '<button style="display:none" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';

                                }
                            }

                            console.log(e);
                        }
                    },
                ],
                pageLength: 100
            });
            $("#tblAssessment_Sign").DataTable();
        }
        function GetAssessmentInfoByYear_FSign(yearSign) {
            $("#tblAssessment_FSign").DataTable().destroy();
            $("#tblAssessment_FSign tbody").empty();

            $('#tblAssessment_FSign').DataTable({
                ajax: {
                    url: '@Url.Action("GetAssessmentInfo_FSign", "AssessmentInfo")',
                    dataSrc: "",
                    data: { year: yearSign }
                },

                columns: [
                    { data: "empCode" },
                    { data: "empName" },
                    { data: "assessmentYear" },
                    { data: "fDate" },
                    { data: "tDate" },
                    { data: "recommendatorName" },
                    { data: "signatoryName" },
                    { data: "FinalSignatoryName" },
                    
                    {
                        "render": function(data,type,e,meta){
                        var status="";
                        if(e.statusInfoId==7){status='সম্পন্ন' }else{status='অসম্পন্ন'}
                        return status;
                        }

                        },
                    {
                        title: "প্রক্রিয়া", width: 10,
                        "render": function (data, type, e, meta) {
                            if (e.empType == "Top") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';
                                }
                                else {
                                    return '<button style="" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';

                                }
                            }

                            else if (e.empType == "Officer") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';
                                }
                                else {
                                    return '<button style="" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button> &nbsp;';

                                }
                            }
                            else if (e.empType == "Clerk") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';
                                }
                                else {
                                    return '<button style="" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';

                                }
                            }
                            else if (e.empType == "NonClerk") {
                                if (e.statusInfoId != 7) {
                                    return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';
                                }
                                else {
                                    return '<button style="" onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-eye"></i></button>';

                                }
                            }

                            console.log(e);
                        }
                    },
                ],
                pageLength: 100
            });
            $("#tblAssessment_FSign").DataTable();
        }

        function GetAssessmentInfoByYear_Final(yearFinal) {
            $("#tblAssessment").DataTable().destroy();
            $("#tblAssessment tbody").empty();
            $('#tblAssessment').DataTable({
                ajax: {
                    url: '@Url.Action("GetAssessmentInfo_Final", "AssessmentInfo")',
                    dataSrc: "",
                    data: { year: yearFinal }
                },

                columns: [
                    //{
                    //    title: "Action", "width": "6%",
                    //    "render": function (data, type, e, meta) {
                    //        return '<a class="btn btn-info" href="javascript:void(0)" title="Delete" onclick="SelectJob(' + e.Id + ',' + "'" + e.leadName + "'" + ',' + "'" + e.agreementTypeName + "'" + ',' + "'" + e.remarks + "'" + ',' + e.AgreementId + "," + "'" + e.bankName + "'" + ',' + "'" + e.branchName + "'" + ')"><i class="fa fa-plus-square"></i></a>';
                    //    }
                    //},
                    { data: "empCode" },
                    { data: "empName" },
                    { data: "assessmentYear" },
                    { data: "fDate" },
                    { data: "tDate" },
                    { data: "recommendatorName" },
                    { data: "signatoryName" },
                    //{ data: "empType" },
                    //{
                    //    title: "রিপোর্ট", width: 10,
                    //    "render": function (data, type, e, meta) {
                    //        if (e.empType == "Top") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button> &nbsp;';
                    //        }
                    //        else if (e.empType == "Officer") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button> &nbsp;';
                    //        }
                    //        else if (e.empType == "Clerk") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>';
                    //        }
                    //        else if (e.empType == "NonClerk") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>';
                    //        }
                    //        console.log(e);
                    //    }
                    //},
                    //{ data: "statusInfoId" },
                    //{
                    //    title: "রিপোর্ট", width: 10,
                    //    "render": function (data, type, e, meta) {
                    //        if (e.empType == "Top") {
                    //             return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button> &nbsp;';
                    //        }
                    //        else if (e.empType == "Officer") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button> &nbsp;';
                    //        }
                    //        else if (e.empType == "Clerk") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>';
                    //        }
                    //        else if (e.empType == "NonClerk") {
                    //            return '<button onclick="getPrint(' + e.assessmentId + ',\'' + e.empType + '\',' + e.empCode + ',' + e.assessmentYear + ')" class="btn btn-info btn-xs" title="Preview"><i class="fa fa-print"></i></button>';
                    //        }
                    //        console.log(e);
                    //    }
                    //},
                ],
                pageLength: 100
            });
            $("#tblAssessment").DataTable();
        }

       
		function getPrint(assesId, empType, empCode, year) {
                       
            if (empType == "Top" && year == "2019") {
                window.open('@Url.Action("Index", "ExecutiveOfficer2019")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
            else if (empType == "Top" && year != "2019") {
                window.open('@Url.Action("Index", "ExecutiveOfficer")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
            else if (empType == "Officer" && year == "2019") {
                window.open('@Url.Action("Index", "Officer2019")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
			else if (empType == "Officer" && year != "2019") {
                window.open('@Url.Action("Index", "Officer")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
            else if (empType == "Clerk" && year == "2019") {
                window.open('@Url.Action("Index", "Clerical2019")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
			else if (empType == "Clerk" && year != "2019") {
                window.open('@Url.Action("Index", "Clerical")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
            else if (empType == "NonClerk" && year == "2019") {
                window.open('@Url.Action("Index", "NonClerical2019")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
			else if (empType == "NonClerk" && year != "2019") {
                window.open('@Url.Action("Index", "NonClerical")?id=' + assesId + '&&empCode=' + empCode, '_blank');
            }
        }

        function fnAddVal(id, arg) {
            var ids = arg.getAttribute('id');

            if ($('#' + ids).is(":checked")) {
                $('#txt-' + id).val(id);
            } else {
                $('#txt-' + id).val(0);
            }
        }

        //user Profile

        function readSignatureURL(input) {
            if (input.files && input.files[0]) {
                var filerdr = new FileReader();
                filerdr.onload = function (e) {
                    $('#user_signature').attr('src', e.target.result);
                }
                filerdr.readAsDataURL(input.files[0]);
            }
        }
        function readPictureURL(input) {
            if (input.files && input.files[0]) {
                var filerdr = new FileReader();
                filerdr.onload = function (e) {
                    $('#user_img').attr('src', e.target.result);
                }
                filerdr.readAsDataURL(input.files[0]);
            }
        }

        function uploadSignatureFile() {
            var id = 0;
            if ($("#empCode").val() != 0) {
                id = $('#empCode').val();
            }
            if (window.FormData !== undefined) {
                var fileUpload = $("#signaturePath").get(0);
                var files = fileUpload.files;
                var fileData = new FormData();
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                fileData.append("ID", id);

                $.ajax({
                    url: '@Url.Action("UploadImageFile", "AssessmentInfo")',
                    type: "POST",
                    contentType: false,
                    processData: false,
                    data: fileData,
                    success: function (result) {

                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        };

        function uploadPictureFile() {
            var id = 0;
            if ($("#empCode").val() != 0) {
                id = $('#empCode').val();
            }
            //alert(id)

            if (window.FormData !== undefined) {
                var fileUpload = $("#imagePath").get(0);
                var files = fileUpload.files;
                var fileData = new FormData();
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                fileData.append("ID", id);

                $.ajax({
                    url: '@Url.Action("UploadPhotoFile", "AssessmentInfo")',
                    type: "POST",
                    contentType: false,
                    processData: false,
                    data: fileData,
                    success: function (result) {
                        //alert()
                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        };

        function ProcessAllBranchXml2019() {
            $('#btn2ndSave').prop('disabled', true);
            var signaturePath;
            var imagePath;
            var signatureExist = $('#hiddensignature').val();
            var pictureExist = $('#hiddenimage').val();

            if (document.getElementById("signaturePath").files.length == 0) {
                if (signatureExist == '') {
                    swal("Alert, Please upload signature.");
                    $('#btn2ndSave').prop('disabled', false);
                    return false;
                }
                else {
                    signaturePath = '';
                }
            }
            else {
                signaturePath = document.getElementById("signaturePath").files[0].name;
            }

            if (document.getElementById("imagePath").files.length == 0) {
                if (pictureExist == '') {
                    swal("Alert, Please upload photo.");
                    $('#btn2ndSave').prop('disabled', false);
                    return false;
                }
                else {
                    imagePath = '';
                }
            }
            else {
                imagePath = document.getElementById("imagePath").files[0].name;
            }

            var empcode = $('#empCode').val();
            var jbDura = $('#JobDuration').val();
            var jbBranch = $('#JobDurationAsBranchManger').val();
            var jbZonal = $('#JobDurationAsZonalHead').val();
            var jbOthers = $('#JobDurationAsOthers').val();

            //if (jbBranch == '') {
            //    swal("Alert, Job Duration As Branch Manger could not be empty.");
            //    $('#btn2ndSave').prop('disabled', false);
            //    return false;
            //}
            /*else */
            //if (jbZonal == '') {
            //    swal("Alert, Job Duration As Zonal Head could not be empty.");
            //    $('#btn2ndSave').prop('disabled', false);
            //    return false;
            //}


            var txtAppType = "Do you want to save this record!";
            var conAppType = "Yes, save it!";
            swal({
                title: 'Are you sure?', text: txtAppType, type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: conAppType
            }).then(function () {

                $.ajax({
                    url: '@Url.Action("UpdateUsersProfile_2019", "Manage")',
                    data: { signaturePath: signaturePath, imagePath: imagePath, empcode: empcode, jbDura: jbDura, jbBranch: jbBranch, jbZonal: jbZonal, jbOthers: jbOthers },
                    type: 'GET',
                    success: function (records) {
                        //console.log(records);
                        swal('Success!!', 'Save Successfully!!!', 'success');
                        $('#btn2ndSave').prop('disabled', true);
                        if (records.empType == 'Top') {
                            window.location.href = '@Url.Action("Index", "ExecutiveOfficer2019")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        }
                        else if (records.empType == 'Officer') {
                            window.location.href = '@Url.Action("Index", "Officer2019")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        } else if (records.empType == 'Clerk') {
                            window.location.href = '@Url.Action("Index", "Clerical2019")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        } else if (records.empType == 'NonClerk') {
                            window.location.href = '@Url.Action("Index", "NonClerical2019")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        }

                    },
                    error: function () {
                        alert("Fail to save");
                        $('#btn2ndSave').prop('disabled', false);
                    }
                });
            }, function () { $('#btn2ndSave').prop('disabled', false); });


        }

        function ProcessAllBranchXml() {
            $('#btn2ndSave').prop('disabled', true);
			var signaturePath = $('#hiddensignature').val();
			var imagePath = $('#hiddenimage').val();
            //var signatureExist = $('#hiddensignature').val();
            //var pictureExist = $('#hiddenimage').val();

            //if (document.getElementById("signaturePath").files.length == 0) {
            //    if (signatureExist == '') {
            //        swal("Alert, Please upload signature.");
            //        $('#btn2ndSave').prop('disabled', false);
            //        return false;
            //    }
            //    else {
            //        signaturePath = '';
            //    }
            //}
            //else {
            //    signaturePath = document.getElementById("signaturePath").files[0].name;
            //}

            //if (document.getElementById("imagePath").files.length == 0) {
            //    if (pictureExist == '') {
            //        swal("Alert, Please upload photo.");
            //        $('#btn2ndSave').prop('disabled', false);
            //        return false;
            //    }
            //    else {
            //        imagePath = '';
            //    }
            //}
            //else {
            //    imagePath = document.getElementById("imagePath").files[0].name;
            //}

            var empcode = $('#empCode').val();
			var jbDura = $('#JobDuration').val();
            var jbBranch = $('#JobDurationAsBranchManger').val();
            var jbZonal = $('#JobDurationAsZonalHead').val();
            var jbOthers = $('#JobDurationAsOthers').val();
            var type = $('#acrType').val();
            var fromDate = $('#acrfromDate').val();
            var toDate = $('#acrtoDate').val();
            var year = $('#acrYear').val();

            //if (jbBranch == '') {
            //    swal("Alert, Job Duration As Branch Manger could not be empty.");
            //    $('#btn2ndSave').prop('disabled', false);
            //    return false;
            //}
            //else
            //if (jbZonal == '') {
            //    swal("Alert, Job Duration As Zonal Head could not be empty.");
            //    $('#btn2ndSave').prop('disabled', false);
            //    return false;
            //}


            var txtAppType = "Do you want to save this record!";
            var conAppType = "Yes, save it!";
            swal({
                title: 'Are you sure?', text: txtAppType, type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: conAppType
            }).then(function () {

                $.ajax({
                    url: '@Url.Action("UpdateUsersProfile", "AssessmentInfo")',
                    data: { signaturePath: signaturePath, imagePath: imagePath, empcode: empcode, jbDura: jbDura, jbBranch: jbBranch, jbZonal: jbZonal, jbOthers: jbOthers, type: type, fromDate: fromDate, toDate: toDate, year: year },
                    type: 'GET',
                    success: function (records) {
                        console.log(records);
                        swal('Success!!', 'Save Successfully!!!', 'success').then(function () {
                            $('#btn2ndSave').prop('disabled', false);
                        });
                        if (records.empType == 'Top') {
                            window.location.href = '@Url.Action("Index", "ExecutiveOfficer")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        }
                        else if (records.empType == 'Officer') {
                            window.location.href = '@Url.Action("Index", "Officer")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        } else if (records.empType == 'Clerk') {
                            window.location.href = '@Url.Action("Index", "Clerical")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        } else if (records.empType == 'NonClerk') {
                            window.location.href = '@Url.Action("Index", "NonClerical")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                        }

                    },
                    error: function () {
                        alert("Fail to save");
                        $('#btn2ndSave').prop('disabled', false);
                    }
                });
            }, function () { $('#btn2ndSave').prop('disabled', false); });


        }

        function GetUsersProfile(response) {
            console.log(response)
            $('#empCode').val(response[0].EmpCode);
            $('#empName').val(response[0].EmpName);
            $('#designation').val(response[0].DesignationName);
            $('#branchName').val(response[0].BranchName);
            $('#userName').val(response[0].UserName);
            $('#userType').val(response[0].DivisionName);
            if (response[0].JobDuration == '') {
                $('#JobDuration').val(response[0].JobDuration);
            }
            else {
                $('#JobDuration').val(response[0].JobDuration);
            }
            if (response[0].JobDurationAsBranchManger == '') {
                $('#JobDurationAsBranchManger').val(response[0].JobDurationAsBranchManger);
            }
            else {
                $('#JobDurationAsBranchManger').val(response[0].JobDurationAsBranchManger);
            }
            if (response[0].JobDurationAsZonalHead == '') {
                $('#JobDurationAsZonalHead').val(response[0].JobDurationAsZonalHead);
            }
            else {
                $('#JobDurationAsZonalHead').val(response[0].JobDurationAsZonalHead);
            }
            if (response[0].JobDurationAsOthers == '') {
                $('#JobDurationAsOthers').val('');
            }
            else {
                $('#JobDurationAsOthers').val(response[0].JobDurationAsOthers);
                $('#JobDuration').val(response[0].JobDuration);
            }

            $('#user_signature').prop('src', '/'+response[0].signaturePath);
            $('#user_img').prop('src', '/' +response[0].picturePath);

            $('#hiddensignature').val(response[0].signaturePath);
            $('#hiddenimage').val(response[0].picturePath);

        }

        function NextUserProfile() {

            var empcode = $('#empCode').val();

            $.ajax({
                url: '@Url.Action("GetUsersNextProfile", "AssessmentInfo")',
                data: { empcode: empcode },
                type: 'GET',
                success: function (records) {

                    if (records.empType == 'Top') {
                        window.location.href = '@Url.Action("Index", "ExecutiveOfficer")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                    } else if (records.empType == 'Officer') {
                        window.location.href = '@Url.Action("Index", "Officer")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                    } else if (records.empType == 'Clerk') {
                        window.location.href = '@Url.Action("Index", "Clerical")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                    } else if (records.empType == 'NonClerk') {
                        window.location.href = '@Url.Action("Index", "NonClerical")?id=' + records.assessmentId + '&empCode=' + records.empCode + '';
                    }
                },
                error: function () {
                    alert("Fail to load");

                }
            });

        }

        function formatDate(date) {
            date = new Date(date);
            var year = date.getFullYear(),
                month = date.getMonth() + 1, // months are zero indexed
                day = date.getDate(),
                hour = date.getHours(),
                minute = date.getMinutes(),
                second = date.getSeconds(),
                hourFormatted = hour % 12 || 12, // hour returned in 24 hour format
                minuteFormatted = minute < 10 ? "0" + minute : minute,
                morning = hour < 12 ? "am" : "pm";
            return day + "/" + month + "/" + year + " " + hourFormatted + ":" +
                minuteFormatted + morning;
        }



        //function chkDuplicateEmp() {
        //    //alert(121);
        //    var ecode = $('#empCode').val();

        //    var atype = $('#acrType').val();
        //    var afromDate = $('#acrfromDate').val();
        //    var atoDate = $('#acrtoDate').val();
        //    var ayear = $('#acrYear').val();

        //    Common.Ajax('GET', '/HRPMSACR/AssessmentInfo/GetAcrEmployeeDate?ecode=' + ecode + '&atype=' + atype + '&afromDate=' + afromDate + '&atoDate=' + atoDate + '&ayear=' + ayear, [], 'json', ajaxFunctionCheck, false);


        //}

        //function ajaxFunctionCheck(res) {
        //    if (res != null) {
        //        //$("#Name").val('');
        //        swal('Warning', 'ACR  already exists!', 'warning');
        //        $("#acrfromDate").val('');
        //        $("#acrtoDate").val('');
        //        return false;
        //    }
        //}

    </script>

}

<style>
    input[type='file'] {
        display: none;
    }

    .custom-file-upload {
        border: 1px solid #ccc;
        display: inline-block;
        padding: 6px 12px;
        cursor: pointer;
        width: 200px;
        background-color: rgb(26,187,156);
        color: white;
    }
</style>