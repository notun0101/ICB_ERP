@model FixationIntegrationViewModel
@{
    ViewData["Title"] = "Punishment Re-Fixation";
    Layout = "~/Areas/Payroll/Views/Shared/_SalaryMasterForm.cshtml";

}

<div class="card" style="width: 100%;">
    <div class="card-header  d-flex flex-row align-items-center justify-content-between">
        <h5 class="m-0 font-weight-bold text-primary">Punishment Re-Fixation Information</h5>
        <a class='btn btn-success mr-4' style="margin-left: 40%;" data-toggle='tooltip' title='List' href='/Payroll/Fixation/punishmentReFixationList'><i class="fas fa-list"> <span style="">List</span></i></a>

        <a class='btn btn-info mr-4' style="" data-toggle='tooltip' title='Go Back' href='/Home/GridMenuPage?moduleId=1013&perentId=5926'><i class="fas fa-angle-double-left"> <span style="">Back</span></i></a>

    </div>
    <div class="card-body">

        <div class="container">
            <form asp-area="Payroll" asp-controller="Fixation" asp-action="SavePunishMentRefixation" method="post">
                <div asp-validation-summary="All" class="text-danger"></div>

                <div class="card" style="width: 100%;">
                    <div class="card-header  d-flex flex-row align-items-center justify-content-between">
                        <h5 class="m-0 font-weight-bold text-primary">Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <input type="hidden" id="fixationintegrationId" name="fixationintegrationId" value=0>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="empcode" class="col-sm-4 col-form-label">Employee Name</label>
                                    <div class="col-sm-8">
                                        <input type="hidden" class="form-control" id="empCode" name="empCode" value="@Model.fixationIntegration?.empCode">
                                        <input type="hidden" class="form-control" id="employeeId" name="employeeId" value="@Model.fixationIntegration?.employeeId">
                                        <input type="text" class="form-control" id="employeeName" name="employeeName" value="">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="joiningDate" class="col-sm-4 col-form-label">Joining Date</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="joiningDate" id="joiningDate" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="dateOfBirth" class="col-sm-4 col-form-label">Birth Date</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="dateOfBirth" id="dateOfBirth" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="currentGradeId" class="col-sm-4 col-form-label">Current Grade</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="currentGradeId" name="currentGrade" value="" readonly>
                                        @*<input type="hidden" class="form-control" id="initialBasic" name="initialBasic" value="@Model.amount">*@
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="postingPlace" class="col-sm-4 col-form-label">Posting Place</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="postingPlace" id="postingPlace" value="" readonly>

                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="letterDate" class="col-sm-4 col-form-label">Letter Date </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="letterDate" id="letterDate" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="reportHeader" class="col-sm-4 col-form-label">Report Header</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control" id="reportHeader" name="reportHeader" style="height: 80px;"></textarea>

                                        @*<input type="text" class="form-control" name="reportHeader" id="reportHeader">*@
                                    </div>
                                </div>


                            </div>
                            <div class="col-sm-6">

                                <div class="form-group row">
                                    <label for="brachCode" class="col-sm-4 col-form-label">Branch</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="hrBranchId" id="hrBranchId" value="" readonly>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="designation" class="col-sm-4 col-form-label">Designation</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="designation" id="designation" value="" readonly>
                                    </div>
                                </div>


                                <div class="form-group row">
                                    <label for="note" class="col-sm-4 col-form-label">File No </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="fileNo" id="fileNo" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="lastPromotionDate" class="col-sm-4 col-form-label">Last promotion Date</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="lastPromotionDate" name="lastPromotionDate" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="lastIncrementDate" class="col-sm-4 col-form-label">Last Increment date</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="lastIncrementDate" id="lastIncrementDate" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="nextIncrementDate" class="col-sm-4 col-form-label">Next Increment Date </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="nextIncrementDate" id="nextIncrementDate" value="" readonly>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="refNo" class="col-sm-4 col-form-label">Ref. No </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="refNo" value="" id="refNo" data-parsley-required="false">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="punishmentDate" class="col-sm-4 col-form-label">Punishment Date </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="punishmentDate" id="punishmentDate" value="" readonly>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>


                <div class="card" style="width: 100%;">
                    <div class="card-header  d-flex flex-row align-items-center justify-content-between">
                        <h5 class="m-0 font-weight-bold text-primary">Details Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-6">

                                <div class="form-group row">
                                    <label for="effectiveDate" class="col-sm-4 col-form-label">Effective Date </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="" id="effectiveDate" value="" readonly>
                                    </div>
                                </div>

                                <div class="form-group row d-none">
                                    <label for="fixationType" class="col-sm-4 col-form-label">Fixation Type </label>
                                    <div class="col-sm-8">
                                        <select class="form-control" name="" id="fixaTypeId">


                                            <option value="">Select</option>
                                            @foreach (var data in Model.fixaTypes)
                                            {
                                                <option value="@data.Id">@data.FixationTypeName</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="particular" class="col-sm-4 col-form-label">Particular</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control" id="particular" style="height: 90px;"></textarea>
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-6">

                                <div class="form-group row">
                                    <label for="fixationGrade" class="col-sm-4 col-form-label">Fixation Grade </label>
                                    <div class="col-sm-8">
                                        <select class="form-control" name="" id="fixationGrade">
                                            <option value="">Select</option>
                                            @foreach (var data in Model.salaryGrades)
                                            {
                                                if (Model.fixationGradeId == data.Id)
                                                {
                                                    <option value="@data.Id" selected>@data.gradeName</option>
                                                }
                                                else
                                                {
                                                    <option value="@data.Id">@data.gradeName</option>
                                                }

                                            }
                                        </select>
                                    </div>
                                </div>                               
                                <div class="form-group row">
                                    <label for="amount" class="col-sm-4 col-form-label">Amount</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" name="" value="" id="amount">
                                    </div>
                                </div>


                            </div>
                        </div>
                        <div class="col-sm-12 row" style="    padding: 29px 27px 8px 0;">
                            <div class="col-10" style="margin-bottom: 7px;"></div>

                            <div class="col-2 text-center" style="padding-top: 5px;padding-left: 20px;">
                                <button type="button" onclick="AddDetails()" value="Add" title="Add" class="btn-success btn-lg" style="float:right; margin-top:5px;"><i class="fas fa-plus"></i>Add</button>

                            </div>
                        </div>
                    </div>
                </div>


                <div class="card" style="width: 100%;">
                    <div class="card-header  d-flex flex-row align-items-center justify-content-between">
                        <h5 class="m-0 font-weight-bold text-primary">Details List</h5>
                    </div>
                    <div class="card-body ">


                        <div class="row">
                            <div class="col-12" style="transform: translate(4%, 0%);margin-left:-57px; margin-right: 60px;">
                                <table class="table table-responsive table-active" id="tblitemDetails">
                                    <thead style="width:100%">
                                        <tr>
                                            <th style="width:15%">SL</th>
                                            <th style="width:25%">Particular</th>
                                            <th style="width:30%"> Effective Date</th>
                                            <th style="width:20%"> Basic</th>
                                            <th style="width:10%"> Grade</th>
                                            <th style="width:20%"><span> Action</span></th>
                                        </tr>
                                    </thead>
                                    <tbody id="detailsData"></tbody>
                                </table>



                            </div>
                        </div>



                        <div class="row">
                            <div class="col-sm-12 row" style="padding: 29px 27px 8px 0;">
                                <div class="col-10" style="margin-bottom: 7px;"></div>
                                <div class="col-2 text-center" style="padding-top: 5px;padding-left: 20px;">
                                    <button type="submit" id="submitbtn" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;display:none;"><i class="fas fa-save"></i></button>
                                    <button type="button" id="submit" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;"><i class="fas fa-save"></i> Save</button>
                                </div>
                            </div>


                        </div>


                    </div>


                </div>
                @*<div class="row">
            <input type="hidden" id="fixationintegrationId" name="fixationintegrationId" value=0>
            <input type="hidden" id="employeeId" name="employeeId">
            <div class="col-sm-6">
                <div class="form-group row">
                    <label for="empcode" class="col-sm-4 col-form-label">Employee Name</label>
                    <div class="col-sm-8">
                        <input type="hidden" class="form-control" id="empCode" name="empCode">
                        <input type="text" class="form-control" id="employeeName" placeholder="Enter employee Name" autocomplete="off">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="joiningDate" class="col-sm-4 col-form-label">Joining Date</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="joiningDate" id="joiningDate" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="dateOfBirth" class="col-sm-4 col-form-label">Birth Date</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="dateOfBirth" id="dateOfBirth" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="currentGradeId" class="col-sm-4 col-form-label">Current Grade</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="currentGradeId" name="currentGradeId" readonly>
                        <input type="hidden" class="form-control" id="initialBasic" name="initialBasic" value="@Model.amount">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="lastIncrementDate" class="col-sm-4 col-form-label">Last Increment date</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="lastIncrementDate" id="lastIncrementDate" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="postingPlace" class="col-sm-4 col-form-label">Posting Place</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="postingPlace" id="postingPlace" readonly>

                    </div>
                </div>

                <div class="form-group row">
                    <label for="lastPromotionDate" class="col-sm-4 col-form-label">Last promotion Date</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="lastPromotionDate" name="lastPromotionDate" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="effectiveDate" class="col-sm-4 col-form-label">Effective Date </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="effectiveDate" id="effectiveDate" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="nextIncrementDate" class="col-sm-4 col-form-label">Punishment Date </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="punishmentDate" id="punishmentDate" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="nextIncrementDate" class="col-sm-4 col-form-label">Remarks </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="remarks" id="remarks" >
                    </div>
                </div>


            </div>
            <div class="col-sm-6">

                <div class="form-group row">
                    <label for="brachCode" class="col-sm-4 col-form-label">Branch</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="hrBranchId" id="hrBranchId" readonly>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="designation" class="col-sm-4 col-form-label">Designation</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="designation" id="designation" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="fixationType" class="col-sm-4 col-form-label">Fixation Type </label>
                    <div class="col-sm-8">
                        <select class="form-control" name="fixaTypeId" id="fixaTypeId">


                            <option value="">Select</option>
                            @foreach (var data in Model.fixaTypes)
                            {
                                <option value="@data.Id">@data.FixationTypeName</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="fixationGrade" class="col-sm-4 col-form-label">Fixation Grade </label>
                    <div class="col-sm-8">
                        <select type="text" class="form-control" name="fixationGrade" id="fixationGrade">
                            <option value="">Select</option>
                            @foreach (var data in Model.salaryGrades)
                            {
                                <option value="@data.Id">@data.gradeName</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="amount" class="col-sm-4 col-form-label">Amount</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="amount" id="amount">
                    </div>
                </div>

                <div class="form-group row">
                    <label for="refNo" class="col-sm-4 col-form-label">Ref. No </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="refNo" id="refNo">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="note" class="col-sm-4 col-form-label">File No </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="fileNo" id="fileNo" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="letterDate" class="col-sm-4 col-form-label">letter Date </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="letterDate" id="letterDate" readonly>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="nextIncrementDate" class="col-sm-4 col-form-label">Next Increment Date </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="nextIncrementDate" id="nextIncrementDate" readonly>
                    </div>
                </div>


            </div>
        </div>
        <hr>
        <button type="submit" id="submitbtn" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;display:none;"><i class="fas fa-save"></i></button>
        <button type="button" id="submit" value="Submit" class="btn btn-success" style="float:right; margin-top:5px;"><i class="fas fa-save"></i> Save</button>*@
            </form>
        </div>
    </div>
</div>
<script> 
    $(document).ready(function () {
        $("#submit").click(function () {
            swal({
                title: 'Are you sure?', text: 'Do you want to submit this record!', type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, submit it!'
            }).then(function () {
                $("#submitbtn").click();
            });
        });
        Common.Ajax('GET', '/global/api/GetActiveAllEmployeeInfo', [], 'json', ajaxGetEmployees);
       //$("#initialBasic").val();
        $("#lastIncrementDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());
        $("#lastPromotionDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());
        $("#letterDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());
        $("#effectiveDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());
        $("#nextIncrementDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());
        $("#punishmentDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());
        ////$("#joiningDate").datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "2010:2030" }).datepicker("setDate", new Date());



    });
    function ajaxGetEmployees(response) {
        var GeEmployeesList = [];
        console.log(response)
        $.each(response, function (id, option) {
            var obj = new Object();
            obj.key = option.Id;
            obj.value = option.nameEnglish + "(" + option.employeeCode + ")";
            obj.employeeCode = option.employeeCode;
            obj.designation = option.lastDesignation ?.designationName;
            obj.joiningDate = option.joiningDateGovtService;
            obj.dateOfBirth = option.dateOfBirth;
            obj.postingPlace = option.placeOfPosting;
            obj.currentGrade = option.currentGrade ?.gradeName;
            //obj.brachCode = option.branch ?.hrBranchId;
            obj.branchName = option.hrBranch ?.branchName;
            obj.currentBasic = option.currentBasic;
            obj.fileNo = option.fileNo;
            GeEmployeesList[GeEmployeesList.length] = obj;
        });
        $('#employeeName').autocomplete({
            source: GeEmployeesList,
            select: function (event, ui) {
                //$("#employeeName").val(ui.item.value);
                var Bdate = formatingDate(ui.item.dateOfBirth)
                
                $("#employeeId").val(ui.item.key);
                $("#empCode").val(ui.item.employeeCode);
                $("#designation").val(ui.item.designation);
                $("#joiningDate").val(formatingDate(ui.item.joiningDate));
                $("#dateOfBirth").val(Bdate);
                $("#postingPlace").val(ui.item.postingPlace);
               // $("#currentGradeId").val(ui.item.currentGrade);
                $("#currentGradeId").val(ui.item.currentGrade + ' (' + ui.item.currentBasic + ')');
                $("#hrBranchId").val(ui.item.branchName);
                $("#fileNo").val(ui.item.fileNo);
                Common.Ajax('GET', '/Payroll/Fixation/GetSalaryAndGradeByEmpCode?code=' + ui.item.employeeCode, [], 'json', ajaxFiationGrade, false);
            }
        });
    }
    function ajaxFiationGrade(res) {
        console.log(res)
        $('#fixationGradeId').val(res.fixationGradeId)
        $('#amount').val(res.amount)
    }
    $('#fixationGrade').on('change', function () {
        var empCode = $('#empCode').val();
        Common.Ajax('GET', '/Payroll/Fixation/GetNewIncrementFixationByEmpCode?code=' + empCode, [], 'json', ajaxNewFixationInitial, false);

    })

    function ajaxNewFixationInitial(res) {
        console.log(res);
    }
    $('#fixationType').on('change', function () {
        if ($(this).val() == 'Promotion') {
            var code = $('#empCode').val();
            var type = "Promotion";
            Common.Ajax('GET', '/Payroll/Fixation/GetPromotionSalaryByEmpCodeAndType?code=' + code + '&type='+type, [], 'json', ajaxFunctionGetGrade, false);
        }
        if ($(this).val() == 'Increment') {
            var code = $('#empCode').val();
            var type = "Increment";
            Common.Ajax('GET', '/Payroll/Fixation/GetPromotionSalaryByEmpCodeAndType?code=' + code + '&type=' + type, [], 'json', ajaxFunctionGetGrade, false);
        }
    })
    function ajaxFunctionGetGrade(res) {
        console.log(res);
    }


    //function formatDate(date) {
    //    date = new Date(date);
    //    var year = date.getFullYear(),
    //        month = date.getMonth() + 1, // months are zero indexed
    //        day = date.getDate(),
    //        hour = date.getHours(),
    //        minute = date.getMinutes(),
    //        second = date.getSeconds(),
    //        hourFormatted = hour % 12 || 12, // hour returned in 24 hour format
    //        minuteFormatted = minute < 10 ? "0" + minute : minute,
    //        morning = hour < 12 ? "am" : "pm";

    //    return day + "-" + + month + "-" + year;

    //}

   
   

    function formatingDate(date) {
        var monthName = "";
        date = new Date(date);
        var year = date.getFullYear(),
            month = date.getMonth() + 1, // months are zero indexed
            day = date.getDate(),
            hour = date.getHours(),
            minute = date.getMinutes(),
            second = date.getSeconds(),
            hourFormatted = hour % 12 || 12, // hour returned in 24 hour format
            minuteFormatted = minute < 10 ? "0" + minute : minute,
            morning = hour < 12 ? "am" : "pm";
        if (month == 1) {
            monthName = 'Jan';
        }
        else if (month == 2) {
            monthName = 'Feb';
        }
        else if (month == 3) {
            monthName = 'Mar';
        }
        else if (month == 4) {
            monthName = 'Apr';
        }
        else if (month == 5) {
            monthName = 'May';
        }
        else if (month == 6) {
            monthName = 'Jun';
        }
        else if (month == 7) {
            monthName = 'Jul';
        }
        else if (month == 8) {
            monthName = 'Aug';
        }
        else if (month == 9) {
            monthName = 'Sep';
        }
        else if (month == 10) {
            monthName = 'Oct';
        }
        else if (month == 11) {
            monthName = 'Nov';
        }
        else {
            monthName = 'Dec';
        };

        return day + "-" + monthName + "-" + year;
    }

     function AddDetails() {


        var ifExistIndex = window.localStorage.getItem("holdIndex");
        var index = "0";
        if (ifExistIndex == "null" || ifExistIndex == null) {
            index = $("#tblitemDetails tbody>tr").length;
        }
        else {
            index = ifExistIndex;
            tdRID = $("#tblitemDetails tbody >tr:eq(" + ifExistIndex + ") td:eq(0) .clsItemId").val();
        }

        let id = parseInt($("#employeeId").val()) ? parseInt($("#employeeId").val()) : 0;
        let empCode = $('#empCode').val();
        let employeeName = '';
        //var itemSpecificationId = parseInt($('#itemspecId').val()) ? parseInt($('#itemspecId').val()) : 0;
        let effectiveDate = $('#effectiveDate').val();
        var fixaTypeId = $("#fixaTypeId").val();
        var particular = $("#particular").val();
        var amount = $("#amount").val();
        var fixationGrade = $('#fixationGrade').val();

        //if (ItemId == 0) {
        //    cuteAlert({ type: "info", title: "Attention!", message: "Please select Item", buttonText: "Ok" });
        //    return false;
        //}

        //if (reqQty == '') {

        //    cuteAlert({ type: "info", title: "Attention!", message: "Please insert Quantity", buttonText: "Ok" });

        //    return false;
        //}



        //if (itemSpecificationName == '') {
        //    cuteAlert({ type: "info", title: "Attention!", message: "Please enter item Specification", buttonText: "Ok" });

        //    return false;
        //}
        //else if (itemSpecificationId == 0) {
        //    cuteAlert({ type: "info", title: "Attention!", message: "Please select valid Specification Name", buttonText: "Ok" });

        //    return false;
        //}

        //var editOption = parseInt($('#IsEdit').val()) ? parseInt($('#IsEdit').val()) : 0;
        //var RowCount = $("#tblitemDetails tbody>tr").length;

        //for (i = 1; i <= RowCount; i++) {
        //    var _ItemId = $("#txItemId").val();
        //    var spec = $("#txitemSpecificationId").val();
        //    var specname = $("#txitemSpecificationName").val();

        //    if (editOption == 1) {

        //    } else {
        //        if (_ItemId == ItemId && specname == itemSpecificationName) {

        //            //alert('You have already added this item specification');
        //            cuteAlert({ type: "info", title: "Attention!", message: "You have already added this item specification", buttonText: "Ok" });

        //            return false
        //        }
        //    }
        //}

        var dtTable = $("#tblitemDetails");
        var tableBody = dtTable.find('tbody');
        var trHtml = '<tr id=' + index + '>' +
            '<td>' + (parseInt(index) + 1) + '</td>' +
            '<td>' + particular + '<input type="hidden"name="particularMultiple" id="txparticular" class="clsparticular"value="' + particular + '"/>' +

            '<td>' + effectiveDate + '<input type="hidden" name="effectiveDateMultiple" class="clseffectiveDate" value="' + effectiveDate + '"/></td>' +
            '<td>' + amount + '<input type="hidden" name="amountMultiple" class="clsamount"value="' + amount + '"/></td>' +
            '<td>' + fixationGrade + '<input type="hidden" name="fixationGradeMultiple" class="clsfixationGrade" value="' + fixationGrade + '"/></td>' +

            '<td><a href="javascript:void(0)"style="background-color:red;border-color:red" data-toggle="tooltip" title="Delete" class="btn btn-danger btn-xs" onclick="Delete(' + index + ')"><i class="fa fa-trash"></i></a>&nbsp;&nbsp;' +
            '</td>' +

            '</tr>';
        // console.log(ifExistIndex);
        if (ifExistIndex == null || ifExistIndex == "null") {
            tableBody.append(trHtml);
            $('#dtAttachmentp5').empty();
        }
        else {
            var rowUpdate = $("#tblitemDetails tbody >tr:eq(" + ifExistIndex + ")");
            rowUpdate.replaceWith(trHtml);
            window.localStorage.setItem("holdIndex", null);
            ifExistIndex = null;
        }
        Refresh();
        var dtTable = $("#dtAttachmentp");
        var tableBody1 = dtTable.find('tbody');
        tableBody1.empty();
    }


    function Refresh() {
        $("#tblSupplier > tbody").empty();
        //$(".cls" + $('#itemSpecificationId').val()).hide();
        //$('#employeeId').val('');
        $('#effectiveDate').val('')
        //$('#fixaTypeId').val('')
        $('#particular').val('');
        $('#amount').val('');
        $('#fixationGrade').val('');
        
        $("#IsEdit").val(0);

      

        window.localStorage.setItem("holdIndex", null);
        ifExistIndex = null;
    }
    function Delete(index) {

        swal({
            type: "question",
            title: "Attention!",
            message: "Do you want to delete this record!",
            confirmText: "Yes!",
            cancelText: "No"
        }).then((res) => {
            if (res) {
                $("#tblitemDetails #" + index).remove();
                //  SumCal();
                return false;

            }
        })


    }


</script>
    