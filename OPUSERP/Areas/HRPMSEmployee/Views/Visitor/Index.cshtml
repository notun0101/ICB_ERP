
@model PIMSVisitorViewModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/HRPMSEmployee/Views/Shared/_EmployeeForm.cshtml";

}

@section StyleEmp{
}


<section>
    <div class="container-fluid">
        <div class="card">
            <div class="card-body">
                <form asp-area="HRPMSEmployee" asp-controller="Visitor" asp-action="Index" method="post" enctype="multipart/form-data" data-parsley-validate="parsley">
                    <div asp-validation-summary="All" class="text-danger"></div>
                    <br />
                    <div class="card">
                        <div class="card-header">
                            <h4>Visitor Information</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label"> Name <span style="color:red">*</span> </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="name" id="name" placeholder="    enter name" required />
                                            <input type="hidden" id="Id" name="Id" value="0" />
                                            <input type="hidden" id="imageUrlstring" name="imageUrlstring"/>
                                            <input type="hidden" id="passportUrlstring" name="passportUrlstring"/>
                                        </div>
                                    </div>
                                </div>       
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Gander</label>
                                        <div class="col-sm-8">
                                            <select name="gander" id="gander" class="form-control">
                                                <option value="">----Select your gander----</option>
                                                <option value="Male"> Male </option>
                                                <option value="Female"> Female </option>
                                                <option value="Others"> Others </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>        
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Purpose </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="subject" id="subject" placeholder="    enter subject name" />
                                        </div>
                                    </div>
                                </div>       
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Phone <span style="color:red">*</span> </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="phone" id="phone" placeholder="    enter phone number" required/>
                                        </div>
                                    </div>
                                </div>
                            </div>   
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Email <span style="color:red">*</span> </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="email" id="email" placeholder="    enter email name" required/>
                                        </div>
                                    </div>
                                </div>       
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Date of Birth</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control date-cls" name="dateOfBirth" id="dateOfBirth" placeholder="    enter birthday name" autocomplete="off" />
                                        </div>
                                    </div>
                                </div>
                            </div> 
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Passport Number <span style="color:red">*</span> </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="passportNumber" id="passportNumber" placeholder="    enter passport number" required />
                                        </div>
                                    </div>
                                </div>       
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">

                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Nationality</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="nationality" id="nationality" placeholder="    enter nationality" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Image URL</label>
                                        <div class="col-sm-8">
                                            <input type="file" class="form-control" name="imageUrl" id="imageUrl" placeholder="    enter image url" />
                                        </div>
                                    </div>
                                    <img id="user_img" style="width:80px;height:80px;margin-top:10px;margin-left:170px" src="~/images/user.png" alt="" class="img-thumbnail">
                                </div>       
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Passport URL</label>
                                        <div class="col-sm-8">
                                            <input type="file" class="form-control" name="passportUrl" id="passportUrl" placeholder="    enter passport url" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="card">
                        <div class="card-header">
                            <h4>Visitor Organization Information</h4>                            
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Designation</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="designation" id="designation" placeholder="    enter designation" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Organization</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="organization" id="organization" placeholder="    enter organization name" />
                                        </div>
                                    </div>
                                </div>
                            </div> 
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Organization Phone</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="organizationPhone" id="organizationPhone" placeholder="    enter organization phone number" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Organization Email</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="organizationEmail" id="organizationEmail" placeholder="    enter organization email" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Organization Address</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" name="organizationAddress" id="organizationAddress" placeholder="    enter organization address" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Letter Sending Date</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control date-cls" name="letterSendingDate" id="letterSendingDate" placeholder="    enter letter sending date" autocomplete="off" />
                                        </div>
                                    </div>
                                </div>
                            </div> 
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Arrival Date</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control date-cls" name="arrivalDate" id="arrivalDate" placeholder="    enter arrival date" autocomplete="off" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label">Deparchur Date</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control date-cls" name="deparchurDate" id="deparchurDate" placeholder="    enter deparchur date" autocomplete="off" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">Remarks</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="remarks" id="remarks" placeholder="    enter remarks" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="submit" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;"><i class="fas fa-save"></i></button>
                </form>
            </div>
        </div>
    </div>
</section>

<br />

<section>
    <div class="container-fluid">
        <div class="row clearfix">
            <div class="col-12">
                <div class="card mb-4">
                    <!-- Card Header - Dropdown -->
                    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h4 class="m-0 font-weight-bold">List of Visitor Information</h4>
                    </div>
                    <!-- Card Body -->
                    <div class="card-body">
                        <table class="table table-striped table-bordered" id="financeCodeTable">
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th>Name</th>
                                    <th>Nationality</th>
                                    <th>Phone</th>
                                    <th>Email</th>
                                    <th>Organization</th>
                                    <th>Passport Number</th>
                                    <th>Remarks</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var data in Model.PIMSVisitors)
                                {
                                    <tr>
                                        <td><img src="~/@data.imageUrl" height="32" width="32" alt="@data.name" /></td>
                                        <td>@data.name</td>
                                        <td>@data.nationality</td>
                                        <td>@data.phone</td>
                                        <td>@data.email</td>
                                        <td>@data.organization</td>
                                        <td>@data.passportNumber</td>
                                        <td>@data.remarks</td>
                                        <td>
                                            <a class="btn btn-success" onclick="Edit(@data.Id,'@data.name', '@data.subject', '@data.designation','@data.nationality','@data.gander','@data.phone','@data.email','@data.organization','@data.organizationPhone','@data.organizationEmail','@data.organizationAddress','@data.dateOfBirth','@data.letterSendingDate','@data.arrivalDate','@data.deparchurDate','@data.passportNumber','@data.imageUrl','@data.passportUrl','@data.remarks')" href="#"><i class="fa fa-edit"></i></a>
                                            <a class='btn btn-success' data-toggle='tooltip' title='Preview' target='_blank' href='/HRPMSEmployee/Visitor/ProfileView/@data.Id'><i class='fas fa-eye'></i></a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                            @*<tfoot>
                    <tr>
                        <th>Subject</th>
                        <th>Name</th>
                        <th>Designation</th>
                        <th>Nationality</th>
                        <th>Gander</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th>Organization</th>
                        <th>Organization Phone</th>
                        <th>Organization Email</th>
                        <th>Organization Address</th>
                        <th>Date Of Birth</th>
                        <th>Letter Sending Date</th>
                        <th>Arrival Date</th>
                        <th>Deparchur Date</th>
                        <th>Passport Number</th>
                        <th>ImageUrl</th>
                        <th>PassportUrl</th>
                        <th>Remarks</th>
                        <th>Action</th>
                    </tr>
                </tfoot>*@
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section ScriptsEmp{
    <script>
        $(document).ready(function () {
            $('#financeCodeTable').DataTable();
            $('.date-cls').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });

            $("#imageUrl").change(function () {
                readURL(this);
            });
        });

        function readURL(input) {
            if (input.files && input.files[0]) {
                var filerdr = new FileReader();
                filerdr.onload = function (e) {
                    $('#user_img').attr('src', e.target.result);
                }
                filerdr.readAsDataURL(input.files[0]);
            }
        }

        function Edit(Id, name, subject, designation, nationality, gander, phone, email, organization, organizationPhone, organizationEmail, organizationAddress, dateOfBirth, letterSendingDate, arrivalDate, deparchurDate, passportNumber, imageUrl, passportUrl, remarks ) {
            $("#Id").val(Id);
            $("#name").val(name);
            $("#subject").val(subject);
            $("#designation").val(designation);
            $("#nationality").val(nationality);
            $("#gander").val(gander);
            $("#phone").val(phone);
            $("#email").val(email);
            $("#organization").val(organization);
            $("#organizationPhone").val(organizationPhone);
            $("#organizationEmail").val(organizationEmail);
            $("#organizationAddress").val(organizationAddress);
            $("#dateOfBirth").val(dateOfBirth);
            $("#letterSendingDate").val(letterSendingDate);
            $("#arrivalDate").val(arrivalDate);
            $("#deparchurDate").val(deparchurDate);
            $("#passportNumber").val(passportNumber);
            $("#user_img").val(imageUrl);
            $("#passportUrlstring").val(passportUrl);
            $("#remarks").val(remarks);

        }

    </script>
}


