@model ApplicationFormViewModel
@{
    ViewData["TitleMD"] = "Application Form";
    Layout = "~/Areas/HRPMSMasterData/Views/Shared/_MasterDataForm.cshtml";
    //Layout = "~/Areas/HRPMSEmployee/Views/Shared/_EmployeeForm.cshtml";
}

@section StyleMD{
    <style>

        span.error {
            display: block;
            visibility: hidden;
            color: red;
            font-size: 90%;
            width: 80px;
        }

        tr.error {
            background-color: rgba(255,0,0,0.35);
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

        #user_img1:hover {
            border-radius: 5px;
            cursor: zoom-in;
            transition: 0.3s !important;
            opacity: 0.5;
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

        #user_sign:hover {
            border-radius: 5px;
            cursor: zoom-in;
            transition: 0.3s !important;
            opacity: 0.5;
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

        #user_img2:hover {
            border-radius: 5px;
            cursor: zoom-in;
            transition: 0.3s !important;
            opacity: 0.5;
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

        ul.ui-autocomplete {
            z-index: 99999999;
        }

        .redStar {
            color: red;
            float: right;
        }

        .spanClass {
            background: white;
            padding: 6px;
            border: 1px solid;
            border-radius: 15px;
            margin-right: 5px;
            color: black;
            margin-bottom: 10px;
            background: oldlace;
        }

        .crossButton {
            margin-left: 5px;
            padding: 3px;
            border-radius: 10px;
            background: maroon;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
}

<link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.11/summernote-bs4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
@*<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">*@
<div class="card" style="width: 100%;">

    <div class="card-header row outBox" style="background-color: #EAF6FA;padding: 0; color: black;">
        <div class="col-md-4" style="display: flex; justify-content: flex-start; align-items: center; ">

            <h5 class="card-title" style="color: black; margin: 8px;">Application Form</h5>

        </div>
        <div class="col-md-8">

            <div style="float: right; margin: 16px;">
                @*<a class='btn btn-info btn-sm' style=""  href='/Home/GridMenuPage?moduleId=3&perentId=5796'><i class="fas fa-angle-double-left"> <span style="">Back</span></i></a>*@
                @*<a class='btn btn-info btn-lg' style=""  href='/Home/GridMenuPage?moduleId=3&perentId=5796'><i class="fas fa-angle-double-left"> <span style="">Back</span></i></a>*@

                <a class='btn btn-info ' style="" href='/Home/GridMenuPage?moduleId=3&perentId=5796'><i class="fas fa-angle-double-left"> <span style="">Back</span></i></a>

            </div>
        </div>
    </div>
    <div class="card-body">
        @*<h5 class="card-title" style="color: black">Application Form</h5>
            <hr>*@
        <div>

            <form asp-area="HRPMSRecruitment" asp-controller="ApplicationForm" id="infoCreateForm"  asp-action="ApplicantsNew" method="post" enctype="multipart/form-data" data-parsley-validate="parsley">

                <div asp-validation-summary="All" class="text-danger"></div>
                <div class="card">
                    <div class="card-header">
                        <h5 style="color: black;">General Information</h5>
                    </div>
                    <div class="card-body">

                        <div class="form-group row">
                            <label for="applicantsNo" class="col-sm-2 col-form-label">Applicants No</label>
                            <div class="col-sm-4">
                                <input type="hidden" id="ApplicationId" name="ApplicationId" value="0" />
                                <input type="text" class="form-control" readonly id="applicantsNo" value="@Model.applicantsNo" name="applicantsNo">
                            </div>
                            <label for="paymentRefno" class="col-sm-2 col-form-label">Payment Reference No</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="paymentRefno" value="" name="payRef">
                            </div>

                        </div>
                        <div class="form-group row">
                            <label for="nameBn" class="col-sm-2 col-form-label">Name (in Bangla)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="nameBn" value="" name="nameBn">
                            </div>
                            <label for="nameEn" class="col-sm-2 col-form-label">Name (in English)<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="nameEn" value="" name="nameEn" data-parsley-required="ture" data-parsley-trigger="keyup">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="nid" class="col-sm-2 col-form-label">NID No<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="nidNO" value="" name="nidNO">
                                <ul class="parsley-errors-list filled" id="nidValidate" style="display: none;">
                                    <li class="parsley-required">NID can be 10, 13 or 17 digits long.</li>
                                </ul>
                            </div>
                            <label for="birthDate" class="col-sm-2 col-form-label">Date of Birth</label>
                            <div class="col-sm-4">
                                <input type="text" data-parsley-required="false"  class="form-control" id="birthDate" value="" name="birthDate" autocomplete="off" readonly>


                                @*<input type="text" class="form-control" readonly required id="birthDate" value="" name="birthDate">*@
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="fnameBn" class="col-sm-2 col-form-label">Father's Name (in Bangla)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="fnameBn" value="" name="fNmaeBN">
                            </div>

                            <label for="fnameEn" class="col-sm-2 col-form-label">Father's Name (in English)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="fnameEn" value="" name="fNmaeEN">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="mnameBn" class="col-sm-2 col-form-label">Mother's Name (in Bangla)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="mnameBn" value="" name="mNmaeBN">
                            </div>

                            <label for="mnameEn" class="col-sm-2 col-form-label">Mother's Name (in English)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="mnameEn" value="" name="mNmaeEN">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="salaryGradeId" class="col-sm-2 col-form-label">Salary Grade<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" data-parsley-required="true" data-parsley-trigger="keyup" class="form-control" name="salaryGradeId" id="salaryGradeId">
                                    <option value="">Select</option>
                                    @foreach (var data in Model.salaryGrades)
                                    {
                                        <option value="@data.Id">@data.gradeName</option>
                                    }

                                </select>
                            </div>
                            <label for="occupation" class="col-sm-2 col-form-label">Designation (Bangla)<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="occupation" name="occupation" data-parsley-required="true" data-parsley-trigger="keyup" />
                            </div>
                        </div>
                        <div class="form-group row">

                            <label for="reportDateEn" class="col-sm-2 col-form-label">Date (English) </label>
                            <div class="col-sm-4">
                                <input type="text" data-parsley-required="false" class="form-control" id="reportDateEn" value="" name="reportDateEn" autocomplete="off" readonly>
                            </div>
                            @*<div class="form-group row">*@
                                <label for="reportDateBn" class="col-sm-2 col-form-label">Date (Bangla)<span class="redStar">*</span> </label>

                                <div class="col-sm-2">
                                    <select type="text" class="form-control" id="reportDateBn1" name="banglaDate" data-parsley-required="true" data-parsley-trigger="keyup">
                                        <option>তারিখ</option>

                                        <option value="১">১</option>
                                        <option value="২">২</option>
                                        <option value="৩">৩</option>
                                        <option value="৪">৪</option>
                                        <option value="৫">৫</option>
                                        <option value="৬">৬</option>
                                        <option value="৭">৭</option>
                                        <option value="৮">৮</option>
                                        <option value="৯">৯</option>
                                        <option value="১০">১০</option>
                                        <option value="১১">১১</option>
                                        <option value="১২">১২</option>
                                        <option value="১৩">১৩</option>
                                        <option value="১৪">১৪</option>
                                        <option value="১৫">১৫</option>
                                        <option value="১৬">১৬</option>
                                        <option value="১৭">১৭</option>
                                        <option value="১৮">১৮</option>
                                        <option value="১৯">১৯</option>
                                        <option value="২০">২০</option>
                                        <option value="২১">২১</option>
                                        <option value="২২">২২</option>
                                        <option value="২৩">২৩</option>
                                        <option value="২৪">২৪</option>
                                        <option value="২৫">২৫</option>
                                        <option value="২৬">২৬</option>
                                        <option value="২৭">২৭</option>
                                        <option value="২৮">২৮</option>
                                        <option value="২৯">২৯</option>
                                        <option value="৩০">৩০</option>
                                        <option value="">৩১</option>

                                    </select>
                                </div>
                                <div class="col-sm-1">
                                    <select type="text" class="form-control" id="reportMonthBn1" name="banglaMonth">
                                        <option>মাস</option>
                                        <option value="বৈশাখ">বৈশাখ</option>
                                        <option value="জ্যৈষ্ঠ">জ্যৈষ্ঠ</option>
                                        <option value="আষাঢ়">আষাঢ়</option>
                                        <option value="শ্রাবণ">শ্রাবণ</option>
                                        <option value="ভাদ্র">ভাদ্র</option>
                                        <option value="আশ্বিন">আশ্বিন</option>
                                        <option value="কার্তিক">কার্তিক</option>
                                        <option value="অগ্রহায়ণ">অগ্রহায়ণ</option>
                                        <option value="পৌষ">পৌষ</option>
                                        <option value="মাঘ">মাঘ</option>
                                        <option value="ফাল্গুন">ফাল্গুন</option>
                                        <option value="চৈত্র">চৈত্র</option>


                                    </select>
                                </div>
                                <div class="col-sm-1">
                                    <select type="text" class="form-control" id="years" name="banglaYear" data-parsley-required="true" data-parsley-trigger="keyup">
                                        <option>বছর</option>
                                    </select>
                                </div>
                            @*</div>*@


                        </div>
                     

                    </div>
                    </div>

                <br />
                <div class="card">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-sm-6">
                                <h5 style="color: black;">Present Address : </h5>
                            </div>

                            <div class="col-sm-3">
                                <h5 style="color: black;">Permanent Address : </h5>
                            </div>
                            <div class="col-sm-3">
                                <label for="copyAs" onclick="CopyAddress()" class=" col-form-label"><input type="checkbox" class="form-check-inline" style="margin-right:5px;" id="copyAs" name="copyAs" />Same as Present Address</label>

                            </div>

                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group row">
                            <input type="hidden" id="PresentAdressId" name="PresentAdressId" value="0" />
                            <label for="presentDivision" class="col-sm-2 col-form-label">Division<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" class="form-control" id="presentDivision" value="" name="divisionId" data-parsley-required="true"></select>

                            </div>
                            <input type="hidden" id="PermanentAdressId" name="PermanentAdressId" value="0" />
                            <label for="PermanentDivision" class="col-sm-2 col-form-label">Division<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" class="form-control" id="PermanentDivision" value="" name="divisionIdp" data-parsley-required="true"></select>

                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="presentDistrict" class="col-sm-2 col-form-label">District<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" class="form-control" id="presentDistrict" value="" name="districtId" data-parsley-required="true"></select>

                            </div>

                            <label for="PermanentDistrict" class="col-sm-2 col-form-label">District<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" class="form-control" id="PermanentDistrict" value="" name="districtIdp" data-parsley-required="true"></select>

                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="presentUpazilla" class="col-sm-2 col-form-label">Upazilla<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" class="form-control" id="presentUpazilla" value="" name="thanaId" data-parsley-required="true"></select>

                            </div>

                            <label for="PermanentUpazilla" class="col-sm-2 col-form-label">Upazilla<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <select type="text" class="form-control" id="PermanentUpazilla" value="" name="thanaIdp" data-parsley-required="true"></select>

                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="presentPostOffice" class="col-sm-2 col-form-label">Post Office</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="presentPostOffice1" value="" name="postOffice">
                            </div>

                            <label for="PermanentPostOffice" class="col-sm-2 col-form-label">Post Office</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="PermanentPostOffice1" value="" name="postOfficep">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="presentHouseNo" class="col-sm-2 col-form-label">Road Block/House No</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="presentHouseNo" value="" name="blockSector">
                            </div>

                            <label for="PermanentHouseNo" class="col-sm-2 col-form-label">Road Block/House No</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="PermanentHouseNo" value="" name="blockSectorp">
                            </div>
                        </div>
                        @*<div class="form-group row">
                    <label for="presentHouseNo" class="col-sm-2 col-form-label">Road Block/House No</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="presentHouseNo" value="" name="blockSector">
                    </div>

                    <label for="PermanentHouseNo" class="col-sm-2 col-form-label">Road Block/House No</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="PermanentHouseNo" value="" name="blockSectorp">
                    </div>
                </div>*@


                        <div class="form-group row">
                            <label for="villageBangla" class="col-sm-2 col-form-label">Village (Bangla)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="villageBangla" value="" name="addressBangla">
                            </div>
                            <label for="postBangla" class="col-sm-2 col-form-label">Post (Bangla)</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="postBangla" value="" name="postBangla">
                            </div>
                        </div>
                        @*<div class="form-group row">
                    <label for="mailingAddress" class="col-sm-2 col-form-label">Mailing Address (Bangla)</label>
                    <div class="col-sm-4">
                        <textarea class="form-control" id="mailingAddress" name="mailingAddress"></textarea>
                    </div>
                    <label for="occupation" class="col-sm-2 col-form-label">Designation</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="occupation" name="occupation" />
                    </div>
                </div>*@
                    </div>
                </div>
                <br />
                <div class="card">
                    <div class="card-header">
                        <h5 style="color: black;">Communication : </h5>
                    </div>
                    <div class="card-body">
                      
                        <div class="form-group row">
                            <label for="mobile" class="col-sm-2 col-form-label">Mobile No<span class="redStar">*</span></label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="mobile" value="" name="mobile" data-parsley-required="ture" data-parsley-trigger="keyup">
                            </div>

                            <label for="email" class="col-sm-2 col-form-label">E-Mail</label>
                            <div class="col-sm-4">
                                <input type="email" class="form-control" id="email" value="" name="email" data-parsley-type="email">
                            </div>




                        </div>

                        <div class="form-group row">
                            <label for="nationality" class="col-sm-2 col-form-label">Nationality</label>
                            <div class="col-sm-4">
                                <select class="form-control" id="nationality" name="nationality" data-parsley-required="true">
                                    <option value="">Select</option>
                                    <option value="Bangladeshi">Bangladeshi</option>
                                    <option value="Foreigner">Foreigner</option>
                                </select>
                            </div>

                            <label for="Gender" class="col-sm-2 col-form-label">Gender</label>
                            <div class="col-sm-4">
                                <input type="radio" id="Male" value="1" name="gender"> Male
                                <input type="radio" id="Female" value="2" name="gender"> Female
                                <input type="radio" id="Other" value="0" name="gender"> Other
                            </div>


                        </div>

                        <br />
                        <div class="form-group row">
                            <div class="col-sm-12">
                                <textarea type="text" id="termsAndConditions" name="termsAndConditions" required></textarea>
                            </div>

                        </div>


                    </div>
                </div>
               
                @*<button type="submit" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;"><i class="fas fa-plus-square"></i></button>*@
                <button type="submit" id="submitbtn" value="Submit" class="btn btn-success btn-lg" style="float:right; margin-top:5px;display:none;"><i class="fas fa-save"></i></button>
                <button type="button" id="submit" value="Submit" class="btn btn-success" style="float:right; margin-top:5px;" ><i class="fas fa-save"> Save</i></button>
            </form>
        </div>
    </div>
</div>

<hr />
<div class="card">
    <div class="card-header">
        <h4>Applicants</h4>
    </div>
    <div class="card-body">
        <table class="table table-striped table-bordered" id="applicationFormTable">
            <thead>
                <tr>
                    <th>Applicant No</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.applicationForms)
                {
                    <tr>
                        <td>@item.applicationNo</td>
                        <td>@item.nameEN</td>
                        <td>@item.email</td>
                        <td>@item.mobile</td>
                        <td>
                            @if (item.status == 7)
                            {
                                <span class="badge badge-success">Printed</span>
                            }
                            else if (item.status == 8)
                            {
                                <span class="badge badge-info">Joined</span>
                            }
                            else
                            {
                                <span class="badge" style=" background-color:#0177BD; color:white;">Not Printed</span>
                            }
                        </td>
                        <td>
                            <a href="/HRPMSRecruitment/ApplicationForm/ApplicantsNewList/@item.Id" class="btn btn-info" style="cursor:pointer;" title="Click to Add Attachment File"  target="_blank"><i class="fas fa-list-alt"></i></a>
                            @*<a href="/HRPMSRecruitment/ApplicationForm/AppointmentLetterPdf/@item.Id" class="btn btn-info btn-sm" target="_blank">PDF</a>*@
                            <a class="btn btn-success" data-toggle='tooltip' title='Print' href='javascript:void(0)' onclick="location.href='/HRPMSRecruitment/ApplicationForm/AppointmentLetterPdf?ida=@item.Id'"><i class="fa fa-print"></i></a>
                            <a class="btn" data-toggle='tooltip' title='Click for Edit' style="cursor:pointer;background-color:#0177BD; color:white;" onclick="Edit(@item.Id, '@item.applicationNo', '@item.nameEN', '@item.email', '@item.mobile','@item.payRef', '@item.nameBN', '@item.nidNO', '@item.birthDate.ToString("dd-MMM-yyyy")','@item.fNmaeBN', '@item.fNmaeEN', '@item.mNmaeBN', '@item.mNmaeEN','@item.salaryGradeId', '@item.nationality', '@item.gender', '@item.addressBangla','@item.postBangla', '@item.mailingAddress', '@item.occupation','@item.reportDateEn?.ToString("dd-MMM-yyyy")','@item.reportDateBn')" href="#"><i class="fa fa-edit"></i></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section ScriptsMD{

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.11/summernote-bs4.js"></script>
    @*<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>*@
    <script>
        function convertEnToBnNum(num) {
            var en = "0123456789";
            var bn = "০১২৩৪৫৬৭৮৯";
            var result = "";
            for (var i = 0; i < num.length; i++) {
                var index = en.indexOf(num[i]);
                var bnNum = bn[index];
                result += bnNum;
            }
            return result;
        }
        function Edit(Id, applicationNo, nameEN, email, mobile, paymentRefno, nameBn, nidNO, birthDate, fnameBn, fnameEn, mnameBn, mnameEn, salaryGradeId, nationality, gender, addressBangla, postBangla, mailingAddress, occupation, reportDateEn, reportDateBn ) {
            var splitBnDate = reportDateBn.split(" ");
            var dateBn = splitBnDate[0];
            var monthBn = splitBnDate[1];
            var yearBn = splitBnDate[2];
            $("#ApplicationId").val(Id);
            $("#applicantsNo").val(applicationNo);
            $("#nameEn").val(nameEN);
            $("#email").val(email);
            $("#mobile").val(mobile);
            $("#paymentRefno").val(paymentRefno);
            $("#nameBn").val(nameBn);
            $("#nidNO").val(nidNO);
            $("#birthDate").val(birthDate);
            $("#fnameBn").val(fnameBn);
            $("#fnameEn").val(fnameEn);
            $("#mnameBn").val(mnameBn);
            $("#mnameEn").val(mnameEn);
            $("#salaryGradeId").val(salaryGradeId);
            $("#nationality").val(nationality);
         //   $("#gender").val(gender);
          //  $("#termsAndConditions").val(termsAndConditions);
            $("#villageBangla").val(addressBangla);
            $("#postBangla").val(postBangla);
            $("#mailingAddress").val(mailingAddress);
            $("#occupation").val(occupation);

            if (gender == 1) {
               // $("#Male").is(":checked")
                $('input[name=gender][value=1]').attr('checked', 'checked');
            } else if (gender == 2) {
              //  $("#Female").is(":checked")
                $('input[name=gender][value=2]').attr('checked', 'checked');
            } else {
                $('input[name=gender][value=0]').attr('checked', 'checked');
              //  $("#Other").is(":checked")
            }
            var Id = $('#ApplicationId').val();
            Common.Ajax('GET', '/HRPMSRecruitment/ApplicationForm/PresentApplicationAddress/?id=' + Id, [], 'json', ajaxGetPresentId);
            Common.Ajax('GET', '/HRPMSRecruitment/ApplicationForm/PermanentApplicationAddress/?id=' + Id, [], 'json', ajaxGetPermanentId);
            Common.Ajax('GET', '/HRPMSRecruitment/ApplicationForm/ApplicationFrom/?id=' + Id, [], 'json', ajaxGetApplicationFromId);

           // , presentDivision, presentDistrict, presentUpazilla, presentPostOffice1, presentHouseNo, PermanentDivision, PermanentDivision, PermanentUpazilla, PermanentPostOffice1, PermanentHouseNo
            //$("#presentDivision").val(presentDivision);
            //$("#presentDistrict").val(presentDistrict);
            //$("#presentUpazilla").val(presentUpazilla);
            //$("#presentPostOffice1").val(presentPostOffice1);
            //$("#presentHouseNo").val(presentHouseNo);


            //$("#PermanentDivision").val(PermanentDivision);
            //$("#PermanentDivision").val(PermanentDivision);
            //$("#PermanentUpazilla").val(PermanentUpazilla);
            //$("#PermanentPostOffice1").val(PermanentPostOffice1);
            //$("#PermanentHouseNo").val(PermanentHouseNo);
            $("#reportDateEn").val(reportDateEn);
            $("#reportDateBn1").val(dateBn);
            $("#reportMonthBn1").val(monthBn);
            $("#years").val(yearBn);
           

        }

        function ajaxGetPresentId(response) {
            $("#PresentAdressId").val(response.Id);
            console.log(response);
            $("#presentDivision").val(response.divisionId);
            var id = $('#presentDivision').val();
            Common.Ajax('GET', '/global/api/districts/' + id, [], 'json', ajaxDistrict, false);
            $("#presentDistrict").val(response.districtId);
            var id = $('#presentDistrict').val();
            Common.Ajax('GET', '/global/api/thanas/' + id, [], 'json', ajaxThana, false);
            $("#presentUpazilla").val(response.thanaId);
            $("#presentPostOffice1").val(response.postOffice);
            $("#presentHouseNo").val(response.blockSector);

        }
        function ajaxGetPermanentId(response) {
            $("#PermanentAdressId").val(response.Id);
            console.log(response);
            $("#PermanentDivision").val(response.divisionId);
            var id = $("#PermanentDivision").val();
            Common.Ajax('GET', '/global/api/districts/' + id, [], 'json', ajaxPermanentDistrict, false);
            $("#PermanentDistrict").val(response.districtId);
            var id = $("#PermanentDistrict").val();
            Common.Ajax('GET', '/global/api/thanas/' + id, [], 'json', ajaxPermanentThana, false);
            $("#PermanentUpazilla").val(response.thanaId);
            $("#PermanentPostOffice1").val(response.postOffice);
            $("#PermanentHouseNo").val(response.blockSector);
        }
        function ajaxGetApplicationFromId(response) {

            var length = $('#nidNO').val().length;

            if (length != 10 && length != 13 && length != 17) {
                $('#nidNO').addClass('parsley-error');
                $('#nidNO').removeClass('parsley-success');
                $('#nidValidate').show();



                $('#infoCreateForm').parsley().validate();
            }
            //else {
            //    if (isEmp == null) {
            //        $("#submitbtn").click();
            //    }
            //    else {
            //        swal('warning', 'The employee code is already exists!', 'warning');
            //    }
            //}
            var bodytext = response.termsAndConditions
            console.log(bodytext);
            $('#termsAndConditions').summernote('code', bodytext);

        }


        $(document).ready(function () {
            var firstYear = 1400;
            var lastYear = 1700;
            for (var i = firstYear; i <= lastYear; i++) {
                $('#years').append('<option value="' + convertEnToBnNum(i.toString()) + '">' + convertEnToBnNum(i.toString()) + '</option>')
            }

            $("#submit").click(function () {
                swal({
                    title: 'Are you sure?', text: 'Do you want to submit this record!', type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, submit it!'
                }).then(function () {
                    $("#submitbtn").click();
                });
            });
            $('#nidNO').on('keyup', function () {
                var length = $(this).val().length;
                if (length != 10 && length != 13 && length != 17) {
                    $(this).addClass('parsley-error');
                    $(this).removeClass('parsley-success');
                    $('#nidValidate').show();
                }
                else {
                    $(this).removeClass('parsley-error');
                    $(this).addClass('parsley-success');
                    $('#nidValidate').hide();
                }
            })
			$('#termsAndConditions').summernote({
				tabsize: 2,
				height: 300
            });
            $('#birthDate').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2070" });
            $('#reportDateEn').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1940:2070" });

			//$('#applicationFormTable').DataTable();
            $('#applicationFormTable').DataTable({
                stateSave: false,
                dom: "<'row'<'col-sm-12 col-md-2'l><'col-sm-12 col-md-3'B><'col-sm-12 col-md-7'f>>" +
                    "<'row'<'col-sm-12't>>" +
                    "<'row'<'col-sm-12 col-md-6'i><'col-sm-12 col-md-6'pr>>",
                buttons: [
                    {
                        extend: 'excelHtml5',
                        text: '<i class="fa fa-file-excel"></i> Excel',
                        titleAttr: 'Excel',
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4]
                        },
                        title: "New Applicants Information",
                        messageTop: 'List Of Applicants',
                        class: 'btn btn-info'
                    },
                    {
                        extend: 'csvHtml5',
                        text: '<i class="fa fa-file-excel"></i> CSV',
                        titleAttr: 'CSV',
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4]
                        },
                        title: "New Applicants Information",
                        messageTop: 'List Of Applicants'
                    },
                    {
                        extend: 'print',
                        text: '<i class="fa fa-print"></i> Print',
                        titleAttr: 'Print',
                        title: "New Applicants Information",                      
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4]
                        },
                        customize: function (doc) {
                            $(doc.document.body).find('h1').css('font-size', '20pt');
                            $(doc.document.body).find('h1').css('font-family', "'Times New Roman', Times, serif");
                            $(doc.document.body).find('h1').css('text-align', 'center');
                        }
                    }
                ]
            });
			var body = `<div style="margin-top: 10px; width: 100%;">
							<p style="margin-left: 50px;">(০১) আপনাকে বাংলাদেশ ডেভেলপমেন্ট ব্যাংক লিমিটেড এর পাবনা ব্রাঞ্চ, পাবনা তে পদায়ন করা হ'ল।</p>
							<p style="margin-left: 50px;">(০২) আপনাকে শিক্ষানবিস 'সিনিয়র অফিসার' হিসাবে ০১(এক) বৎসর কাজ করতে হবে এবং ত্রৈমাসিক বিশেষ গোপনীয় প্রতিবেদনের মাধ্যমে শিক্ষানবিসকালে আপনার কর্মমান পর্যবেক্ষন করা হবে। এক বৎসর শিক্ষানবিসকালে আপনার কর্মমান সন্তোষজনক না হলে আপনার শিক্ষানবিসকাল আরও অনূর্ধ ০৬(ছয়) মাস বর্ধিত করা হবে। বর্ধিত সময়েও কর্মমান সন্তোষজনক না হলে আপনাকে চাকুরীতে বহাল রাখা যাবে না।</p>
						</div>
						<div style="width: 100%; height: 200px; margin-bottom: 20px;">
							<div style="height: 200px; width: 75%; float: left; padding-left: 130px;">
								ধন্যবাদান্তে,
							</div>
							<div style="height: 200px; width: 25%; float: right; text-align: center;">
								<p>আপনার বিশ্বস্ত</p>
								<p>স্বা/-</p>
								<p>(কবির আহমেদ)</p>
								<p>ডেপুটি জেনারেল ম্যানেজার</p>
							</div>
						</div>

						<div style="width: 100%;">
							<p style="text-decoration: underline;">অনুলিপি</p>
							<p style="text-indent: 50px;" id="mailAddress"></p>
						</div>
						<div style="width: 100%;">
							<div style="width: 25%; text-align: center; float: right;">
								<p>স্বা/-</p>
								<p>ডেপুটি জেনারেল ম্যানেজার</p>
							</div>
						</div>`
			$('#termsAndConditions').summernote('code', body);

            $("#language").addClass("active");
            //$('#date').datepicker({ uiLibrary: 'bootstrap4' });
            //$('#dateOfBirth').datepicker({ uiLibrary: 'bootstrap4' });
            $('#resignDate').datepicker({ uiLibrary: 'bootstrap4' });
            $('#joinDate').datepicker({ uiLibrary: 'bootstrap4' });
            $('#spanRow').rowSpan = 2;
            $("#OnOff").hide();
            $("#Q1").hide();
            $("#otherQuotaName").hide();
            $("#imagePath1").change(function () {
                readURL1(this);
            });
            $("#sign").change(function () {
                readURL12(this);
            });


            $("#user_img1").click(function () {
                var img = $(this).attr('src');
                if (img.indexOf("pdfIcon.png") >= 0) {
                    //alert($("#userFile").val())
                    $("#pdfFrame").attr('src', $("#userFile").val());
                    $("#pdfViewModal").modal('show');
                }
                else {
                    $("#imgView").attr('src', img);
                    $("#imgViewModal").modal('show');
                }
            });
            $("#user_sign").click(function () {
                var img = $(this).attr('src');
                $("#imgView1").attr('src', img);
                $("#imgViewModal1").modal('show');

            });
            $("#user_img2").click(function () {
                var img = $(this).attr('src');
                if (img.indexOf("pdfIcon.png") >= 0) {
                    //alert($("#userFile").val())
                    $("#pdfFrame2").attr('src', $("#userFile2").val());
                    $("#pdfViewModal2").modal('show');
                }



            });

            $("#paymentDoc").change(function () {
                readURL2(this);
            });
            //$('.datepicker').datepicker({ dateFormat: "dd-M-yy", showAnim: "scale", changeMonth: true, changeYear: true, yearRange: "1900:2100" });


            Common.Ajax('GET', '/global/api/divisions/1', [], 'json', ajaxDivision, false);
            Common.Ajax('GET', '/global/api/divisions/1', [], 'json', ajaxPermanentDivision, false);
            Common.Ajax('GET', '/global/api/applicationForms/7', [], 'json', ajaxStatus, false);

            $("#presentDivision").change(function () {
                var id = $(this).val();
                Common.Ajax('GET', '/global/api/districts/' + id, [], 'json', ajaxDistrict, false);
            });

            $("#PermanentDivision").change(function () {
                var id = $(this).val();
                Common.Ajax('GET', '/global/api/districts/' + id, [], 'json', ajaxPermanentDistrict, false);
            });

            $("#presentDistrict").change(function () {
                var id = $(this).val();
                Common.Ajax('GET', '/global/api/thanas/' + id, [], 'json', ajaxThana, false);
            });

            $("#PermanentDistrict").change(function () {
                var id = $(this).val();
                Common.Ajax('GET', '/global/api/thanas/' + id, [], 'json', ajaxPermanentThana, false);
            });


            @*//Present
            if (@Model.present.divisionId > 0) {
                $('#presentDivision').val(@Model.present.divisionId);
                var divisionId = @Model.present.divisionId;
                Common.Ajax('GET', '/global/api/districts/' + divisionId, [], 'json', ajaxDistrict, false);

                $('#presentDistrict').val(@Model.present.districtId);
                var districtId = @Model.present.districtId;
                Common.Ajax('GET', '/global/api/thanas/' + districtId, [], 'json', ajaxThana, false);

                $('#presentUpazilla').val(@Model.present.thanaId);
            }

        //Permanent
            if (@Model.permanent.divisionId > 0) {
                $('#PermanentDivision').val(@Model.permanent.divisionId);
                var divisionId = @Model.permanent.divisionId;
                Common.Ajax('GET', '/global/api/districts/' + divisionId, [], 'json', ajaxPermanentDistrict, false);

                $('#PermanentDistrict').val(@Model.permanent.districtId);
                var districtId = @Model.permanent.districtId;
                Common.Ajax('GET', '/global/api/thanas/' + districtId, [], 'json', ajaxPermanentThana, false);

                $('#PermanentUpazilla').val(@Model.permanent.thanaId);
            }*@

            $('#add').click(function () {
                //validation and add order items
                var isAllValid = true;
                if ($('#type').val() == "") {
                    isAllValid = false;
                    $('#type').siblings('span.error').css('visibility', 'visible');
                }
                else {
                    $('#type').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#degree').val() == "") {
                    isAllValid = false;
                    $('#degree').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#degree').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#institution').val() == "") {
                    isAllValid = false;
                    $('#institution').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#institution').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#board').val() == "") {
                    isAllValid = false;
                    $('#board').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#board').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#country').val() == "") {
                    isAllValid = false;
                    $('#country').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#country').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#certifiationYear').val() == "") {
                    isAllValid = false;
                    $('#certifiationYear').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#certifiationYear').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#roll').val() == "") {
                    isAllValid = false;
                    $('#roll').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#roll').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#Subject').val() == "") {
                    isAllValid = false;
                    $('#Subject').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#Subject').siblings('span.error').css('visibility', 'hidden');
                }
                if ($('#gpa').val() == "") {
                    isAllValid = false;
                    $('#gpa').siblings('span.error').css('visibility', 'visible');
                } else {
                    $('#gpa').siblings('span.error').css('visibility', 'hidden');
                }

                if (isAllValid) {
                    //var $newRow = $('#mainrow').clone().removeAttr('id');
                    //$('.clstype', $newRow).val($('#type').val());
                    //$('.clsdegree', $newRow).val($('#degree').val());

                    //Replace add button with remove button
                   // $('#add', $newRow).addClass('remove').val('Remove').removeClass('btn-success').addClass('btn-danger');

                    //remove id attribute from new clone row
                    //$('#type,#degree,#institution,#board,#roll,#country,#certifiationYear,#Subject,#gpa,#add', $newRow).removeAttr('id');
                    //$('span.error', $newRow).remove();
                    //append clone row
                    var clstype = $('.clstype :selected').val();
                    var clsdegree = $('.clsdegree').val();
                    var clsInst = $('.clsInst').val();
                    var clsBoard = $('.clsBoard1').val();
                    var clsRoll = $('.clsRoll').val();
                    var clsCountry = $('.clsCountry').val();
                    var clsCertification = $('.clsCertification').val();
                    var clsSub = $('.clsSub').val();
                    var clsGpa = $('.clsGpa').val();
                    $('#appendEdu').append(`<tr>
                                                <td><input type="hidden" class="form-control" name="EduId" value="0" /><input type="text" class="form-control" name="type" readonly value="${clstype}" /></td>
                                                <td><input type="text" class="form-control" name="degree" readonly value="${clsdegree}" /></td>
                                                <td><input type="text" class="form-control" name="boardUniversity" readonly value="${clsInst}" /></td>
                                                <td><input type="text" class="form-control" name="institution" readonly value="${clsBoard}" /></td>
                                                <td><input type="text" class="form-control" name="rollNo"  readonly value="${clsRoll}" /></td>
                                                <td><input type="text" class="form-control" name="country"  readonly value="${clsCountry}" /></td>
                                                <td><input type="text" class="form-control" name="yearOfCertification" readonly value="${clsCertification}" /></td>
                                                <td><input type="text" class="form-control" name="mainSubject" readonly value="${clsSub}" /></td>
                                                <td><input type="text" class="form-control" name="gpaDivision" readonly value="${clsGpa}" /></td>
                                            </tr>`);
                    //$('#educationDetails').append($newRow);

                    //clear select data
                    Refresh();
                }


            })

            //remove button click event
            $('#educationDetails').on('click', '.remove', function () {
                $(this).parents('tr').remove();
            });
           

        });
        function CopyAddress() {
            if ($('#copyAs').is(":checked")) {
                $('#PermanentPostOffice1').val($('#presentPostOffice1').val());
                $('#PermanentHouseNo').val($('#presentHouseNo').val());

                $('#PermanentDivision').val($('#presentDivision').val());

                var divId = $('#presentDivision').val();
                Common.Ajax('GET', '/global/api/districts/' + divId, [], 'json', ajaxPermanentDistrict, false);
                $('#PermanentDistrict').val($('#presentDistrict').val());

                var disId = $('#presentDistrict').val();
                Common.Ajax('GET', '/global/api/thanas/' + disId, [], 'json', ajaxPermanentThana, false);
                $('#PermanentUpazilla').val($('#presentUpazilla').val());


            }
            else {

                $('#PermanentHouseNo').val($('').val());
                $('#PermanentPostOffice1').val($('').val());
                $('#PermanentDivision').val($('').val());

                var divId = $('#presentDivision').val();
                Common.Ajax('GET', '/global/api/districts/' + divId, [], 'json', ajaxPermanentDistrict, false);
                $('#PermanentDistrict').val($('').val());

                var disId = $('#presentDistrict').val();
                Common.Ajax('GET', '/global/api/thanas/' + disId, [], 'json', ajaxPermanentThana, false);
                $('#PermanentUpazilla').val($('').val());

            }
        };

        function ajaxDivision(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += '<option value="' + item.Id + '">' + item.divisionName + '</option>';
            });
            $('#presentDivision').empty();
            $('#presentDivision').append(options);
        }
        function ajaxStatus(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += ' item.divisionName';
            });

        }

        function ajaxPermanentDivision(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += '<option value="' + item.Id + '">' + item.divisionName + '</option>';
            });
            $('#PermanentDivision').empty();
            $('#PermanentDivision').append(options);
        }

        function ajaxDistrict(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += '<option value="' + item.Id + '">' + item.districtName + '</option>';
            });
            $('#presentDistrict').empty();
            $('#presentDistrict').append(options);
        }

        function ajaxPermanentDistrict(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += '<option value="' + item.Id + '">' + item.districtName + '</option>';
            });
            $('#PermanentDistrict').empty();
            $('#PermanentDistrict').append(options);
        }

        function ajaxThana(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += '<option value="' + item.Id + '">' + item.thanaName + '</option>';
            });
            $('#presentUpazilla').empty();
            $('#presentUpazilla').append(options);
        }

        function ajaxPermanentThana(response) {
            var options = '<option value="">Select</option>';
            $.each(response, function (i, item) {
                options += '<option value="' + item.Id + '">' + item.thanaName + '</option>';
            });
            $('#PermanentUpazilla').empty();
            $('#PermanentUpazilla').append(options);
        }

        function Refresh() {
            $('#type').val('');
            $('#degree').val('');
            $('#institution').val('');
            $('#board').val('');
            $('#roll').val('');
            $('#country').val('');
            $('#certifiationYear').val('');
            $('#Subject').val('');
            $('#gpa').val('');
            $('#orderItemError').empty();
        }
        $("#isFredomFighter1").click(function () {
            $("#OnOff").hide();
        });
        $("#isFredomFighter").click(function () {
            $("#OnOff").show();
        });

        $("#otherN").click(function () {
            $("#Q1").hide();
            $("#otherQuotaName").hide();
        });
        $("#otherY").click(function () {
            $("#Q1").show();
            $("#otherQuotaName").show();
        });




        function AddMultipleExperience() {
            var nameOfOffice = $('#nameOfOffice').val();
            var position = $('#position').val();
            var joinDate = $('#joinDate').val();
            var resignDate = $('#resignDate').val();

            var row = `<tr id="exp_${nameOfOffice}">
							<td><input type="hidden" value="0" name="ExpId"><input type="hidden" value="${nameOfOffice}" name="officeName">${nameOfOffice}</td>
							<td><input type="hidden" value="${position}" name="position">${position}</td>
							<td><input type="hidden" value="${joinDate}" name="from">${joinDate}</td>
							<td><input type="hidden" value="${resignDate}" name="to">${resignDate}</td>
                            <td><a href="javascript:void(0)" onclick="RemoveRow('${nameOfOffice}')">X</a></td>
						</tr>`;

            $('#ExpTbl tbody').append(row);
        }

        function RemoveRow(exp) {
            var id = '#exp_' + exp;
            $(id).remove();
        }
        //function AddRow() {
        //    var row = "<tr id ='newRow'>< td ><select type='text' class='form-control' id='degree' value=''name='degree'>" +
        //        "<option value=''>Select Here</option><option value=''>Ex 1</option><option value=''>Ex 2</option></select></td >" +
        //        "< td ><input type='text' class='form-control' id='institution' value=''name='institution'></td>" +
        //        "<td><input type='text' class='form-control' id='board' value='' name='board'></td>" +
        //        "<td><input type='text' class='form-control' id='roll' value='' name='board'></td>" +
        //        "<td><input type='text' class='form-control' id='country' value=''name='board'></td>" +
        //        "<td><input type='text' class='form-control' id='certifiationYear' value='' name='board'></td>" +
        //        "<td><input type='text' class='form-control' id='Subject' value='' name='board'></td>" +
        //        "<td><input type='text' class='form-control' id='gpa' value='' name='board'></td>" +
        //        "<td><a class='btn btn-default' id='add' onclick='AddRow()'><i class='fas fa-plus-circle'></i></a><a class='btn btn-default' id='remove' onclick='RemoveRow()'><i class='fas fa-minus-circle'></i></a></td></tr>";
        //    $('#spanRow').rowSpan = 5;
        //    $('#appendRow').append(row);
        //}
        //function RemoveRow(){
        //    $('#newRow').remove();
        //}

        function readURL1(input) {
            if (input.files && input.files[0]) {
                var filerdr = new FileReader();
                filerdr.onload = function (e) {
                    $('#user_img1').attr('src', e.target.result);
                }
                filerdr.readAsDataURL(input.files[0]);
            }
        }
        function readURL12(input) {
            if (input.files && input.files[0]) {
                var filerdr = new FileReader();
                filerdr.onload = function (e) {
                    $('#user_sign').attr('src', e.target.result);
                }
                filerdr.readAsDataURL(input.files[0]);
            }
        }
        function readURL2(input) {
            if (input.files && input.files[0]) {
                var filerdr = new FileReader();
                filerdr.onload = function (e) {
                    console.log(e);
                    var srcUrl = e.target.result;
                    if (srcUrl.indexOf("application/pdf") > 0) {
                        $('#user_img2').attr('src', "/EmpAttachment/pdfIcon.png");
                        $('#userFile2').val(e.target.result);
                    }
                    else {
                        $('#user_img2').attr('src', e.target.result);
                    }

                }
                filerdr.readAsDataURL(input.files[0]);
            }
        }

    </script>
}

